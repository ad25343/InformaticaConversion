<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE POWERMART SYSTEM "powrmart.dtd">
<!--
  MAPPING : m_LOAN_APP_INTAKE_to_STG
  TIER    : LOW (Simple)
  STACK   : dbt
  STAGE   : 1 of 6 — Mortgage Loan E2E Batch
  DOMAIN  : Mortgage / Loan Origination
  CONTEXT : First stage of the E2E mortgage pipeline.
            Reads raw loan applications from the Loan Origination System (LOS)
            Oracle database. Masks PII (SSN → SHA-256 hash), derives business
            fields (loan type description, down-payment percentage, refi flag,
            application month), filters out test and pre-withdrawn applications,
            and loads clean records to the Snowflake staging layer.
  VARIABLES:
    $$SRC_CONNECTION     — LOS Oracle connection
    $$TGT_CONNECTION     — Snowflake staging connection
    $$LOAD_DATE          — ETL run date
    $$REJECT_FILE_DIR    — directory for bad records
    $$ENV                — DEV / UAT / PROD
-->
<POWERMART CREATION_DATE="02/26/2026 09:00:00" REPOSITORY_VERSION="186.96">
  <REPOSITORY NAME="MORTGAGE_REPO" VERSION="186" CODEPAGE="UTF-8" DATABASETYPE="Oracle">
    <FOLDER NAME="MORTGAGE_LOS_ETL" GROUP="" OWNER="etl_admin" SHARED="NOTSHARED"
            DESCRIPTION="Mortgage Loan E2E pipeline — Stage 1: Application Intake">

      <!-- ══════════════════════════════════════════════════════════
           SOURCE: LOS_LOAN_APPLICATIONS — Loan Origination System
      ═══════════════════════════════════════════════════════════════ -->
      <SOURCE BUSINESSNAME="LOS Loan Applications"
              DATABASETYPE="Oracle" DBDNAME="MORTGAGE_LOS_DB"
              DESCRIPTION="Raw loan application records from the Loan Origination System"
              NAME="LOS_LOAN_APPLICATIONS" OWNERNAME="LOS">
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="12"  NAME="APPLICATION_ID"     NULLABLE="NOTNULL" FIELDNUMBER="1"  FIELDTYPE="ELEMITEM" PRECISION="12" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="11"  NAME="BORROWER_SSN"        NULLABLE="NOTNULL" FIELDNUMBER="2"  FIELDTYPE="ELEMITEM" PRECISION="11" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="11"  NAME="CO_BORROWER_SSN"     NULLABLE="NULL"    FIELDNUMBER="3"  FIELDTYPE="ELEMITEM" PRECISION="11" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="200" NAME="PROPERTY_ADDRESS"    NULLABLE="NULL"    FIELDNUMBER="4"  FIELDTYPE="ELEMITEM" PRECISION="200" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="100" NAME="CITY"                NULLABLE="NULL"    FIELDNUMBER="5"  FIELDTYPE="ELEMITEM" PRECISION="100" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="2"   NAME="STATE_CODE"          NULLABLE="NULL"    FIELDNUMBER="6"  FIELDTYPE="ELEMITEM" PRECISION="2"   SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="ZIP_CODE"            NULLABLE="NULL"    FIELDNUMBER="7"  FIELDTYPE="ELEMITEM" PRECISION="10"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="COUNTY_CODE"         NULLABLE="NULL"    FIELDNUMBER="8"  FIELDTYPE="ELEMITEM" PRECISION="20"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="15"  NAME="LOAN_AMOUNT"         NULLABLE="NOTNULL" FIELDNUMBER="9"  FIELDTYPE="ELEMITEM" PRECISION="15"  SCALE="2"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="LOAN_PURPOSE"        NULLABLE="NULL"    FIELDNUMBER="10" FIELDTYPE="ELEMITEM" PRECISION="10"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="LOAN_TYPE"           NULLABLE="NULL"    FIELDNUMBER="11" FIELDTYPE="ELEMITEM" PRECISION="10"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="6"   NAME="INTEREST_RATE"       NULLABLE="NULL"    FIELDNUMBER="12" FIELDTYPE="ELEMITEM" PRECISION="6"   SCALE="4"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="3"   NAME="LOAN_TERM_MONTHS"    NULLABLE="NULL"    FIELDNUMBER="13" FIELDTYPE="ELEMITEM" PRECISION="3"   SCALE="0"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="15"  NAME="DOWN_PAYMENT"        NULLABLE="NULL"    FIELDNUMBER="14" FIELDTYPE="ELEMITEM" PRECISION="15"  SCALE="2"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="OCCUPANCY_TYPE"      NULLABLE="NULL"    FIELDNUMBER="15" FIELDTYPE="ELEMITEM" PRECISION="10"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="DATE"     LENGTH="29"  NAME="APPLICATION_DATE"    NULLABLE="NULL"    FIELDNUMBER="16" FIELDTYPE="ELEMITEM" PRECISION="29"  SCALE="9"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="LOAN_OFFICER_ID"     NULLABLE="NULL"    FIELDNUMBER="17" FIELDTYPE="ELEMITEM" PRECISION="20"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="BRANCH_CODE"         NULLABLE="NULL"    FIELDNUMBER="18" FIELDTYPE="ELEMITEM" PRECISION="10"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="APPLICATION_STATUS"  NULLABLE="NULL"    FIELDNUMBER="19" FIELDTYPE="ELEMITEM" PRECISION="20"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="3"   NAME="CREDIT_SCORE"        NULLABLE="NULL"    FIELDNUMBER="20" FIELDTYPE="ELEMITEM" PRECISION="3"   SCALE="0"/>
      </SOURCE>

      <!-- ══════════════════════════════════════════════════════════
           TARGET: STG_LOAN_APPLICATIONS — Snowflake Staging
      ═══════════════════════════════════════════════════════════════ -->
      <TARGET BUSINESSNAME="Staging Loan Applications"
              DATABASETYPE="Snowflake"
              DESCRIPTION="Clean, PII-masked loan application staging table"
              NAME="STG_LOAN_APPLICATIONS" OWNERNAME="MORTGAGE_STG">
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="12"  NAME="APPLICATION_ID"      KEYTYPE="PRIMARY KEY" FIELDNUMBER="1"  PRECISION="12"  SCALE="0" NULLABLE="NOTNULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="64"  NAME="BORROWER_ID_HASH"    KEYTYPE="NOT A KEY"   FIELDNUMBER="2"  PRECISION="64"  SCALE="0" NULLABLE="NOTNULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="64"  NAME="CO_BORROWER_ID_HASH" KEYTYPE="NOT A KEY"   FIELDNUMBER="3"  PRECISION="64"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="200" NAME="PROPERTY_ADDRESS"    KEYTYPE="NOT A KEY"   FIELDNUMBER="4"  PRECISION="200" SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="100" NAME="CITY"                KEYTYPE="NOT A KEY"   FIELDNUMBER="5"  PRECISION="100" SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="2"   NAME="STATE_CODE"          KEYTYPE="NOT A KEY"   FIELDNUMBER="6"  PRECISION="2"   SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="ZIP_CODE"            KEYTYPE="NOT A KEY"   FIELDNUMBER="7"  PRECISION="10"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="COUNTY_CODE"         KEYTYPE="NOT A KEY"   FIELDNUMBER="8"  PRECISION="20"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="15"  NAME="LOAN_AMOUNT"         KEYTYPE="NOT A KEY"   FIELDNUMBER="9"  PRECISION="15"  SCALE="2" NULLABLE="NOTNULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="LOAN_PURPOSE"        KEYTYPE="NOT A KEY"   FIELDNUMBER="10" PRECISION="10"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="LOAN_TYPE"           KEYTYPE="NOT A KEY"   FIELDNUMBER="11" PRECISION="10"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="30"  NAME="LOAN_TYPE_DESC"      KEYTYPE="NOT A KEY"   FIELDNUMBER="12" PRECISION="30"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="6"   NAME="INTEREST_RATE"       KEYTYPE="NOT A KEY"   FIELDNUMBER="13" PRECISION="6"   SCALE="4" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="3"   NAME="LOAN_TERM_MONTHS"    KEYTYPE="NOT A KEY"   FIELDNUMBER="14" PRECISION="3"   SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="15"  NAME="DOWN_PAYMENT"        KEYTYPE="NOT A KEY"   FIELDNUMBER="15" PRECISION="15"  SCALE="2" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="7"   NAME="DOWN_PAYMENT_PCT"    KEYTYPE="NOT A KEY"   FIELDNUMBER="16" PRECISION="7"   SCALE="4" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="OCCUPANCY_TYPE"      KEYTYPE="NOT A KEY"   FIELDNUMBER="17" PRECISION="10"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="DATE"     LENGTH="29"  NAME="APPLICATION_DATE"    KEYTYPE="NOT A KEY"   FIELDNUMBER="18" PRECISION="29"  SCALE="9" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="7"   NAME="APP_YEAR_MONTH"      KEYTYPE="NOT A KEY"   FIELDNUMBER="19" PRECISION="7"   SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="1"   NAME="IS_REFI"             KEYTYPE="NOT A KEY"   FIELDNUMBER="20" PRECISION="1"   SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="3"   NAME="CREDIT_SCORE"        KEYTYPE="NOT A KEY"   FIELDNUMBER="21" PRECISION="3"   SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="LOAN_OFFICER_ID"     KEYTYPE="NOT A KEY"   FIELDNUMBER="22" PRECISION="20"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="BRANCH_CODE"         KEYTYPE="NOT A KEY"   FIELDNUMBER="23" PRECISION="10"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="DATE"     LENGTH="29"  NAME="ETL_LOAD_DATE"       KEYTYPE="NOT A KEY"   FIELDNUMBER="24" PRECISION="29"  SCALE="9" NULLABLE="NULL"/>
      </TARGET>

      <!-- ══════════════════════════════════════════════════════════
           MAPPING
      ═══════════════════════════════════════════════════════════════ -->
      <MAPPING DESCRIPTION="Stage 1 of E2E mortgage pipeline. Reads raw loan applications from the LOS Oracle DB. Masks borrower SSN to SHA-256-equivalent hash (MD5 used for Informatica compatibility). Derives loan type description, down-payment percentage, application month bucket, and refinance flag. Filters out TEST applications and zero-amount records. Loads to Snowflake staging for downstream credit enrichment (Stage 2)."
               ISVALID="YES" NAME="m_LOAN_APP_INTAKE_to_STG"
               OBJECTVERSION="1" VERSIONNUMBER="1">

        <!-- Source Qualifier — LOS Oracle DB -->
        <TRANSFORMATION NAME="SQ_LOS_LOAN_APPLICATIONS" TYPE="Source Qualifier"
                        REUSABLE="NO" OBJECTVERSION="1" VERSIONNUMBER="1"
                        DESCRIPTION="Read loan applications with status not in TEST/WITHDRAWN_PRE. Only pull applications submitted since $$LOAD_DATE minus 1 day to handle late arrivals.">
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPLICATION_ID"     PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="12"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BORROWER_SSN"        PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="11"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="CO_BORROWER_SSN"     PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="11"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="PROPERTY_ADDRESS"    PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="200" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="CITY"                PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="100" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="STATE_CODE"          PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="2"   SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="ZIP_CODE"            PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="COUNTY_CODE"         PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_AMOUNT"         PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="15"  SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_PURPOSE"        PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_TYPE"           PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="INTEREST_RATE"       PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="6"   SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_TERM_MONTHS"    PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="3"   SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="DOWN_PAYMENT"        PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="15"  SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="OCCUPANCY_TYPE"      PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPLICATION_DATE"    PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="29"  SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_OFFICER_ID"     PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BRANCH_CODE"         PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="CREDIT_SCORE"        PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="3"   SCALE="0"/>
          <TABLEATTRIBUTE NAME="Sql Query" VALUE=""/>
          <TABLEATTRIBUTE NAME="Source Filter" VALUE="APPLICATION_STATUS NOT IN (&apos;TEST&apos;, &apos;WITHDRAWN_PRE&apos;) AND APPLICATION_DATE &gt;= TO_DATE(&apos;$$LOAD_DATE&apos;, &apos;YYYY-MM-DD&apos;) - 1"/>
          <TABLEATTRIBUTE NAME="Number Of Sorted Ports" VALUE="0"/>
        </TRANSFORMATION>

        <!-- Expression — PII masking + business rule derivations -->
        <TRANSFORMATION NAME="EXP_MASK_AND_DERIVE" TYPE="Expression"
                        REUSABLE="NO" OBJECTVERSION="1" VERSIONNUMBER="1"
                        DESCRIPTION="Mask SSNs to MD5 hash for PII compliance. Derive loan type description, down-payment percentage, application month, and refinance flag.">
          <!-- Pass-through ports -->
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPLICATION_ID"   PORTTYPE="INPUT/OUTPUT" EXPRESSION="APPLICATION_ID"   PRECISION="12"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BORROWER_SSN_IN"  PORTTYPE="INPUT"        EXPRESSION="BORROWER_SSN"      PRECISION="11"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="CO_SSN_IN"        PORTTYPE="INPUT"        EXPRESSION="CO_BORROWER_SSN"   PRECISION="11"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="PROPERTY_ADDRESS" PORTTYPE="INPUT/OUTPUT" EXPRESSION="PROPERTY_ADDRESS"  PRECISION="200" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="CITY"             PORTTYPE="INPUT/OUTPUT" EXPRESSION="CITY"              PRECISION="100" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="STATE_CODE"       PORTTYPE="INPUT/OUTPUT" EXPRESSION="STATE_CODE"        PRECISION="2"   SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="ZIP_CODE"         PORTTYPE="INPUT/OUTPUT" EXPRESSION="ZIP_CODE"          PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="COUNTY_CODE"      PORTTYPE="INPUT/OUTPUT" EXPRESSION="COUNTY_CODE"       PRECISION="20"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_AMOUNT"      PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_AMOUNT"       PRECISION="15"  SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_PURPOSE"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_PURPOSE"      PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_TYPE"        PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_TYPE"         PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="INTEREST_RATE"    PORTTYPE="INPUT/OUTPUT" EXPRESSION="INTEREST_RATE"     PRECISION="6"   SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_TERM_MONTHS" PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_TERM_MONTHS"  PRECISION="3"   SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="DOWN_PAYMENT"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="DOWN_PAYMENT"      PRECISION="15"  SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="OCCUPANCY_TYPE"   PORTTYPE="INPUT/OUTPUT" EXPRESSION="OCCUPANCY_TYPE"    PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPLICATION_DATE" PORTTYPE="INPUT/OUTPUT" EXPRESSION="APPLICATION_DATE"  PRECISION="29"  SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_OFFICER_ID"  PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_OFFICER_ID"   PRECISION="20"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BRANCH_CODE"      PORTTYPE="INPUT/OUTPUT" EXPRESSION="BRANCH_CODE"       PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="CREDIT_SCORE"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="CREDIT_SCORE"      PRECISION="3"   SCALE="0"/>
          <!-- PII masking: SSN → MD5 hash -->
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BORROWER_ID_HASH"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="MD5(BORROWER_SSN_IN)"
                          PRECISION="64" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="CO_BORROWER_ID_HASH"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="IIF(ISNULL(CO_SSN_IN) OR CO_SSN_IN = &apos;&apos;, NULL, MD5(CO_SSN_IN))"
                          PRECISION="64" SCALE="0"/>
          <!-- Loan type human-readable description -->
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_TYPE_DESC"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="DECODE(LOAN_TYPE, &apos;CONV&apos;, &apos;Conventional&apos;, &apos;FHA&apos;, &apos;FHA Insured&apos;, &apos;VA&apos;, &apos;VA Guaranteed&apos;, &apos;USDA&apos;, &apos;USDA Rural Development&apos;, &apos;ARM&apos;, &apos;Adjustable Rate&apos;, &apos;Other&apos;)"
                          PRECISION="30" SCALE="0"/>
          <!-- Down-payment as % of purchase price (loan + down payment) -->
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="DOWN_PAYMENT_PCT"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="IIF(LOAN_AMOUNT + NVL(DOWN_PAYMENT,0) &gt; 0, ROUND(NVL(DOWN_PAYMENT,0) / (LOAN_AMOUNT + NVL(DOWN_PAYMENT,0)), 4), 0)"
                          PRECISION="7" SCALE="4"/>
          <!-- Month bucket for time-series partitioning -->
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="APP_YEAR_MONTH"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="TO_CHAR(APPLICATION_DATE, &apos;YYYY-MM&apos;)"
                          PRECISION="7" SCALE="0"/>
          <!-- Refinance flag: purchase=N, any refi type=Y -->
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="IS_REFI"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="IIF(INSTR(&apos;REFI CASH_OUT_REFI RATE_REFI STREAMLINE&apos;, LOAN_PURPOSE) &gt; 0, &apos;Y&apos;, &apos;N&apos;)"
                          PRECISION="1" SCALE="0"/>
          <!-- ETL audit timestamp -->
          <TRANSFORMFIELD DATATYPE="DATE" NAME="ETL_LOAD_DATE"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="SYSDATE"
                          PRECISION="29" SCALE="9"/>
        </TRANSFORMATION>

        <!-- Filter — remove zero-amount and null-ID records -->
        <TRANSFORMATION NAME="FIL_VALID_APPLICATIONS" TYPE="Filter"
                        REUSABLE="NO" OBJECTVERSION="1" VERSIONNUMBER="1"
                        DESCRIPTION="Remove records with zero loan amount or null application ID. These indicate LOS data quality issues and must not reach the staging table.">
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPLICATION_ID"      PORTTYPE="INPUT/OUTPUT" EXPRESSION="APPLICATION_ID"      PRECISION="12"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BORROWER_ID_HASH"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="BORROWER_ID_HASH"     PRECISION="64"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="CO_BORROWER_ID_HASH"  PORTTYPE="INPUT/OUTPUT" EXPRESSION="CO_BORROWER_ID_HASH"  PRECISION="64"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="PROPERTY_ADDRESS"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="PROPERTY_ADDRESS"     PRECISION="200" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="CITY"                 PORTTYPE="INPUT/OUTPUT" EXPRESSION="CITY"                 PRECISION="100" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="STATE_CODE"           PORTTYPE="INPUT/OUTPUT" EXPRESSION="STATE_CODE"           PRECISION="2"   SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="ZIP_CODE"             PORTTYPE="INPUT/OUTPUT" EXPRESSION="ZIP_CODE"             PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="COUNTY_CODE"          PORTTYPE="INPUT/OUTPUT" EXPRESSION="COUNTY_CODE"          PRECISION="20"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_AMOUNT"          PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_AMOUNT"          PRECISION="15"  SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_PURPOSE"         PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_PURPOSE"         PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_TYPE"            PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_TYPE"            PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_TYPE_DESC"       PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_TYPE_DESC"       PRECISION="30"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="INTEREST_RATE"        PORTTYPE="INPUT/OUTPUT" EXPRESSION="INTEREST_RATE"        PRECISION="6"   SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_TERM_MONTHS"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_TERM_MONTHS"     PRECISION="3"   SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="DOWN_PAYMENT"         PORTTYPE="INPUT/OUTPUT" EXPRESSION="DOWN_PAYMENT"         PRECISION="15"  SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="DOWN_PAYMENT_PCT"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="DOWN_PAYMENT_PCT"     PRECISION="7"   SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="OCCUPANCY_TYPE"       PORTTYPE="INPUT/OUTPUT" EXPRESSION="OCCUPANCY_TYPE"       PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPLICATION_DATE"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="APPLICATION_DATE"     PRECISION="29"  SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="APP_YEAR_MONTH"       PORTTYPE="INPUT/OUTPUT" EXPRESSION="APP_YEAR_MONTH"       PRECISION="7"   SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="IS_REFI"              PORTTYPE="INPUT/OUTPUT" EXPRESSION="IS_REFI"              PRECISION="1"   SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="CREDIT_SCORE"         PORTTYPE="INPUT/OUTPUT" EXPRESSION="CREDIT_SCORE"         PRECISION="3"   SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_OFFICER_ID"      PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_OFFICER_ID"      PRECISION="20"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BRANCH_CODE"          PORTTYPE="INPUT/OUTPUT" EXPRESSION="BRANCH_CODE"          PRECISION="10"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="ETL_LOAD_DATE"        PORTTYPE="INPUT/OUTPUT" EXPRESSION="ETL_LOAD_DATE"        PRECISION="29"  SCALE="9"/>
          <TABLEATTRIBUTE NAME="Filter Condition" VALUE="NOT ISNULL(APPLICATION_ID) AND LOAN_AMOUNT &gt; 0 AND NOT ISNULL(BORROWER_ID_HASH)"/>
        </TRANSFORMATION>

        <!-- ══ CONNECTORS: SQ → EXP ══ -->
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="APPLICATION_ID"    TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="APPLICATION_ID"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="BORROWER_SSN"      TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="BORROWER_SSN_IN"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="CO_BORROWER_SSN"   TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="CO_SSN_IN"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="PROPERTY_ADDRESS"  TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="PROPERTY_ADDRESS"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="CITY"              TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="CITY"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="STATE_CODE"        TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="STATE_CODE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="ZIP_CODE"          TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="ZIP_CODE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="COUNTY_CODE"       TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="COUNTY_CODE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="LOAN_AMOUNT"       TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="LOAN_AMOUNT"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="LOAN_PURPOSE"      TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="LOAN_PURPOSE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="LOAN_TYPE"         TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="LOAN_TYPE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="INTEREST_RATE"     TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="INTEREST_RATE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="LOAN_TERM_MONTHS"  TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="LOAN_TERM_MONTHS"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="DOWN_PAYMENT"      TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="DOWN_PAYMENT"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="OCCUPANCY_TYPE"    TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="OCCUPANCY_TYPE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="APPLICATION_DATE"  TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="APPLICATION_DATE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="LOAN_OFFICER_ID"   TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="LOAN_OFFICER_ID"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="BRANCH_CODE"       TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="BRANCH_CODE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOS_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="CREDIT_SCORE"      TOINSTANCE="EXP_MASK_AND_DERIVE" TOINSTANCETYPE="Expression" TOFIELD="CREDIT_SCORE"/>

        <!-- ══ CONNECTORS: EXP → FIL ══ -->
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="APPLICATION_ID"     TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="APPLICATION_ID"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="BORROWER_ID_HASH"   TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="BORROWER_ID_HASH"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="CO_BORROWER_ID_HASH" TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="CO_BORROWER_ID_HASH"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="PROPERTY_ADDRESS"   TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="PROPERTY_ADDRESS"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="CITY"               TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="CITY"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="STATE_CODE"         TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="STATE_CODE"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="ZIP_CODE"           TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="ZIP_CODE"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="COUNTY_CODE"        TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="COUNTY_CODE"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_AMOUNT"        TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_AMOUNT"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_PURPOSE"       TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_PURPOSE"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_TYPE"          TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_TYPE"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_TYPE_DESC"     TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_TYPE_DESC"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="INTEREST_RATE"      TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="INTEREST_RATE"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_TERM_MONTHS"   TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_TERM_MONTHS"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="DOWN_PAYMENT"       TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="DOWN_PAYMENT"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="DOWN_PAYMENT_PCT"   TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="DOWN_PAYMENT_PCT"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="OCCUPANCY_TYPE"     TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="OCCUPANCY_TYPE"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="APPLICATION_DATE"   TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="APPLICATION_DATE"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="APP_YEAR_MONTH"     TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="APP_YEAR_MONTH"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="IS_REFI"            TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="IS_REFI"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="CREDIT_SCORE"       TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="CREDIT_SCORE"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_OFFICER_ID"    TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_OFFICER_ID"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="BRANCH_CODE"        TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="BRANCH_CODE"/>
        <CONNECTOR FROMINSTANCE="EXP_MASK_AND_DERIVE" FROMINSTANCETYPE="Expression" FROMFIELD="ETL_LOAD_DATE"      TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="ETL_LOAD_DATE"/>

        <!-- ══ CONNECTORS: FIL → Target ══ -->
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="APPLICATION_ID"      TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="APPLICATION_ID"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="BORROWER_ID_HASH"    TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="BORROWER_ID_HASH"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="CO_BORROWER_ID_HASH" TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="CO_BORROWER_ID_HASH"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="PROPERTY_ADDRESS"    TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="PROPERTY_ADDRESS"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="CITY"                TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="CITY"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="STATE_CODE"          TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="STATE_CODE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="ZIP_CODE"            TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="ZIP_CODE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="COUNTY_CODE"         TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="COUNTY_CODE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_AMOUNT"         TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_AMOUNT"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_PURPOSE"        TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_PURPOSE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_TYPE"           TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_TYPE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_TYPE_DESC"      TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_TYPE_DESC"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="INTEREST_RATE"       TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="INTEREST_RATE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_TERM_MONTHS"    TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_TERM_MONTHS"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="DOWN_PAYMENT"        TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="DOWN_PAYMENT"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="DOWN_PAYMENT_PCT"    TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="DOWN_PAYMENT_PCT"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="OCCUPANCY_TYPE"      TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="OCCUPANCY_TYPE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="APPLICATION_DATE"    TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="APPLICATION_DATE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="APP_YEAR_MONTH"      TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="APP_YEAR_MONTH"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="IS_REFI"             TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="IS_REFI"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="CREDIT_SCORE"        TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="CREDIT_SCORE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_OFFICER_ID"     TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_OFFICER_ID"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="BRANCH_CODE"         TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="BRANCH_CODE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="ETL_LOAD_DATE"       TOINSTANCE="STG_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="ETL_LOAD_DATE"/>

        <INSTANCE NAME="SQ_LOS_LOAN_APPLICATIONS" TRANSFORMATION_NAME="SQ_LOS_LOAN_APPLICATIONS" TYPE="Source Qualifier"   REUSABLE="NO"/>
        <INSTANCE NAME="EXP_MASK_AND_DERIVE"       TRANSFORMATION_NAME="EXP_MASK_AND_DERIVE"       TYPE="Expression"         REUSABLE="NO"/>
        <INSTANCE NAME="FIL_VALID_APPLICATIONS"    TRANSFORMATION_NAME="FIL_VALID_APPLICATIONS"    TYPE="Filter"             REUSABLE="NO"/>
        <INSTANCE NAME="STG_LOAN_APPLICATIONS"     TRANSFORMATION_NAME="STG_LOAN_APPLICATIONS"     TYPE="Target Definition"  REUSABLE="NO"/>

      </MAPPING>
    </FOLDER>
  </REPOSITORY>
</POWERMART>
