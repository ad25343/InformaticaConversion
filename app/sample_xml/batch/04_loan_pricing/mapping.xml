<?xml version="1.0" encoding="UTF-8"?>
<!--
  ============================================================================
  INFORMATICA POWERCENTER MAPPING EXPORT
  ============================================================================
  Mapping Name:        m_LOAN_PRICING
  Stage:              4 of 6 — Mortgage Loan E2E Batch Processing Pipeline
  Complexity:         MEDIUM
  Target Stack:       dbt on Snowflake
  
  PURPOSE:
  Joins approved loans with the rate sheet to determine the offered interest 
  rate, uses a connected lookup to retrieve origination fees from the fee 
  schedule, then calculates APR, monthly payment, total interest, and points 
  for each approved loan. Output feeds dbt staging layer for downstream risk 
  and financial analysis.
  
  SOURCES:
  1. TGT_APPROVED_LOANS (Snowflake)  — Loan applications approved in Stage 3
  2. RATE_SHEET (Oracle)             — Current lending rates by tier/term
  3. FEE_SCHEDULE (Oracle)           — Origination and other fees lookup
  
  TARGET:
  TGT_PRICED_LOANS (Snowflake)       — All loans with calculated pricing
  
  KEY TRANSFORMATIONS:
  - Master-outer join: loans to rates (by LOAN_TYPE, TERM, CREDIT_TIER)
  - Connected lookup: fee schedule retrieval (LOAN_TYPE, OCCUPANCY, STATE)
  - LTV bucket classification (0-60, 60-70, 70-80, 80-90, 90-95)
  - Rate selection based on credit tier and date range validation
  - APR calculation: (Interest + Closing Costs) / Principal / Years * 100
  - Monthly payment using amortization formula
  - PMI calculation conditional on REQUIRES_PMI flag
  - Points calculation from rate sheet
  
  VARIABLES (workflow-level):
  $$SRC_CONNECTION         — TGT_APPROVED_LOANS connection
  $$RATE_CONN              — RATE_SHEET Oracle connection
  $$FEE_CONN               — FEE_SCHEDULE Oracle connection
  $$TGT_CONNECTION         — Snowflake target connection
  $$LOAD_DATE              — Effective load date for joining and effective dating
  $$RATE_EFFECTIVE_DATE    — Rate sheet effective date for LTV validation
  $$ENV                    — Environment (DEV/STG/PROD)
  
  AUTHOR:        Data Engineering — Informatica Automation
  CREATED:       2026-03-01
  MODIFIED:      2026-03-01
  VERSION:       1.0
  ============================================================================
-->
<REPOSITORY>
  <MAPPING NAME="m_LOAN_PRICING" DESCRIPTION="Stage 4: Loan Pricing Calculation" OBJECTVERSION="1">
    <MAPPINGTABLENAME>m_LOAN_PRICING</MAPPINGTABLENAME>
    <ISVALID>1</ISVALID>
    <OBJECTID>1001</OBJECTID>
    
    <!-- =====================================================================
         SOURCE DEFINITIONS
         ===================================================================== -->
    
    <!-- Source 1: TGT_APPROVED_LOANS from Snowflake -->
    <SOURCE NAME="TGT_APPROVED_LOANS" SOURCECONNECTION="$$SRC_CONNECTION" SOURCETYPE="Relational" OBJECTID="2001">
      <SOURCETABLE NAME="TGT_APPROVED_LOANS" SCHEMA="STG" OWNER="MORTGAGE_ETL"/>
      <SOURCEFIELD NAME="APPLICATION_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="LOAN_AMOUNT" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" NULLABLE="N"/>
      <SOURCEFIELD NAME="LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="LOAN_TERM_MONTHS" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="OCCUPANCY_TYPE" DATATYPE="STRING" LENGTH="30" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="PROPERTY_STATE" DATATYPE="STRING" LENGTH="2" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="BUREAU_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" NULLABLE="Y"/>
      <SOURCEFIELD NAME="CREDIT_TIER" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="ACTUAL_LTV" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" NULLABLE="N"/>
      <SOURCEFIELD NAME="DTI_RATIO" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" NULLABLE="N"/>
      <SOURCEFIELD NAME="REQUIRES_PMI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="IS_REFI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="UNDERWRITING_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="LOAN_OFFICER_ID" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" NULLABLE="Y"/>
      <SOURCEFIELD NAME="CREATED_AT" DATATYPE="TIMESTAMP" LENGTH="26" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="UPDATED_AT" DATATYPE="TIMESTAMP" LENGTH="26" SCALE="0" PRECISION="0" NULLABLE="N"/>
    </SOURCE>
    
    <!-- Source 2: RATE_SHEET from Oracle -->
    <SOURCE NAME="RATE_SHEET" SOURCECONNECTION="$$RATE_CONN" SOURCETYPE="Relational" OBJECTID="2002">
      <SOURCETABLE NAME="RATE_SHEET" SCHEMA="RATE_MGT" OWNER="RATE_OWNER"/>
      <SOURCEFIELD NAME="RATE_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="TERM_MONTHS" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="CREDIT_TIER" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="LTV_BUCKET" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="MIN_CREDIT_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" NULLABLE="Y"/>
      <SOURCEFIELD NAME="BASE_RATE" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" NULLABLE="N"/>
      <SOURCEFIELD NAME="POINTS" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" NULLABLE="Y"/>
      <SOURCEFIELD NAME="RATE_EFFECTIVE_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="RATE_EXPIRY_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="CREATED_AT" DATATYPE="TIMESTAMP" LENGTH="26" SCALE="0" PRECISION="0" NULLABLE="N"/>
    </SOURCE>
    
    <!-- Source 3: FEE_SCHEDULE from Oracle (for lookup) -->
    <SOURCE NAME="FEE_SCHEDULE" SOURCECONNECTION="$$FEE_CONN" SOURCETYPE="Relational" OBJECTID="2003">
      <SOURCETABLE NAME="FEE_SCHEDULE" SCHEMA="RATE_MGT" OWNER="RATE_OWNER"/>
      <SOURCEFIELD NAME="FEE_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="OCCUPANCY_TYPE" DATATYPE="STRING" LENGTH="30" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="PROPERTY_STATE" DATATYPE="STRING" LENGTH="2" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="ORIGINATION_FEE_PCT" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" NULLABLE="N"/>
      <SOURCEFIELD NAME="APPRAISAL_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" NULLABLE="N"/>
      <SOURCEFIELD NAME="TITLE_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" NULLABLE="N"/>
      <SOURCEFIELD NAME="RECORDING_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" NULLABLE="N"/>
      <SOURCEFIELD NAME="PMI_MONTHLY_RATE" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" NULLABLE="Y"/>
      <SOURCEFIELD NAME="EFFECTIVE_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <SOURCEFIELD NAME="EXPIRY_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" NULLABLE="Y"/>
    </SOURCE>
    
    <!-- =====================================================================
         TRANSFORMATION OBJECTS
         ===================================================================== -->
    
    <!-- Transformation 1: Source Qualifier for TGT_APPROVED_LOANS -->
    <TRANSFORMATION NAME="SQ_APPROVED_LOANS" TYPE="Source Qualifier" OBJECTID="3001" SOURCECONNECTION="$$SRC_CONNECTION">
      <DESCRIPTION>Source Qualifier filtering approved loans by load date</DESCRIPTION>
      <TRANSFORMFIELD NAME="APPLICATION_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="LOAN_AMOUNT" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15"/>
      <TRANSFORMFIELD NAME="LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="LOAN_TERM_MONTHS" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="OCCUPANCY_TYPE" DATATYPE="STRING" LENGTH="30" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="PROPERTY_STATE" DATATYPE="STRING" LENGTH="2" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="BUREAU_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="CREDIT_TIER" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="ACTUAL_LTV" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5"/>
      <TRANSFORMFIELD NAME="DTI_RATIO" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5"/>
      <TRANSFORMFIELD NAME="REQUIRES_PMI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="IS_REFI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="UNDERWRITING_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="LOAN_OFFICER_ID" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="CREATED_AT" DATATYPE="TIMESTAMP" LENGTH="26" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="UPDATED_AT" DATATYPE="TIMESTAMP" LENGTH="26" SCALE="0" PRECISION="0"/>
      <SQLOVERRIDE>SELECT APPLICATION_ID, LOAN_AMOUNT, LOAN_TYPE, LOAN_TERM_MONTHS, OCCUPANCY_TYPE, PROPERTY_STATE, BUREAU_SCORE, CREDIT_TIER, ACTUAL_LTV, DTI_RATIO, REQUIRES_PMI, IS_REFI, UNDERWRITING_DATE, LOAN_OFFICER_ID, CREATED_AT, UPDATED_AT FROM TGT_APPROVED_LOANS WHERE UNDERWRITING_DATE = '$$LOAD_DATE'</SQLOVERRIDE>
    </TRANSFORMATION>
    
    <!-- Transformation 2: Source Qualifier for RATE_SHEET with date range filter -->
    <TRANSFORMATION NAME="SQ_RATE_SHEET" TYPE="Source Qualifier" OBJECTID="3002" SOURCECONNECTION="$$RATE_CONN">
      <DESCRIPTION>Source Qualifier for rate sheet with effective date range validation</DESCRIPTION>
      <TRANSFORMFIELD NAME="RATE_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="TERM_MONTHS" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="CREDIT_TIER" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="LTV_BUCKET" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="MIN_CREDIT_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="BASE_RATE" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5"/>
      <TRANSFORMFIELD NAME="POINTS" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5"/>
      <TRANSFORMFIELD NAME="RATE_EFFECTIVE_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="RATE_EXPIRY_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0"/>
      <TRANSFORMFIELD NAME="CREATED_AT" DATATYPE="TIMESTAMP" LENGTH="26" SCALE="0" PRECISION="0"/>
      <SQLOVERRIDE>SELECT r.RATE_ID, r.LOAN_TYPE, r.TERM_MONTHS, r.CREDIT_TIER, r.LTV_BUCKET, r.MIN_CREDIT_SCORE, r.BASE_RATE, r.POINTS, r.RATE_EFFECTIVE_DATE, r.RATE_EXPIRY_DATE, r.CREATED_AT FROM RATE_SHEET r WHERE '$$RATE_EFFECTIVE_DATE' BETWEEN r.RATE_EFFECTIVE_DATE AND r.RATE_EXPIRY_DATE</SQLOVERRIDE>
    </TRANSFORMATION>
    
    <!-- Transformation 3: Joiner - Master Outer Join of Loans to Rates -->
    <TRANSFORMATION NAME="JNR_LOANS_RATES" TYPE="Joiner" OBJECTID="3003">
      <DESCRIPTION>Master-outer join: approved loans (master) to rate sheet (detail) on LOAN_TYPE, TERM_MONTHS, CREDIT_TIER</DESCRIPTION>
      <JOINCONDITION>
        <MASTERCONDITION MASTERPORT="SQ_APPROVED_LOANS.LOAN_TYPE" DETAILPORT="SQ_RATE_SHEET.LOAN_TYPE"/>
        <MASTERCONDITION MASTERPORT="SQ_APPROVED_LOANS.LOAN_TERM_MONTHS" DETAILPORT="SQ_RATE_SHEET.TERM_MONTHS"/>
        <MASTERCONDITION MASTERPORT="SQ_APPROVED_LOANS.CREDIT_TIER" DETAILPORT="SQ_RATE_SHEET.CREDIT_TIER"/>
      </JOINCONDITION>
      <JOINTYPE>MASTER OUTER</JOINTYPE>
      
      <!-- Master input ports (from SQ_APPROVED_LOANS) -->
      <TRANSFORMFIELD NAME="M_APPLICATION_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.APPLICATION_ID"/>
      <TRANSFORMFIELD NAME="M_LOAN_AMOUNT" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.LOAN_AMOUNT"/>
      <TRANSFORMFIELD NAME="M_LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.LOAN_TYPE"/>
      <TRANSFORMFIELD NAME="M_LOAN_TERM_MONTHS" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.LOAN_TERM_MONTHS"/>
      <TRANSFORMFIELD NAME="M_OCCUPANCY_TYPE" DATATYPE="STRING" LENGTH="30" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.OCCUPANCY_TYPE"/>
      <TRANSFORMFIELD NAME="M_PROPERTY_STATE" DATATYPE="STRING" LENGTH="2" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.PROPERTY_STATE"/>
      <TRANSFORMFIELD NAME="M_BUREAU_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.BUREAU_SCORE"/>
      <TRANSFORMFIELD NAME="M_CREDIT_TIER" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.CREDIT_TIER"/>
      <TRANSFORMFIELD NAME="M_ACTUAL_LTV" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.ACTUAL_LTV"/>
      <TRANSFORMFIELD NAME="M_DTI_RATIO" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.DTI_RATIO"/>
      <TRANSFORMFIELD NAME="M_REQUIRES_PMI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.REQUIRES_PMI"/>
      <TRANSFORMFIELD NAME="M_IS_REFI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.IS_REFI"/>
      <TRANSFORMFIELD NAME="M_UNDERWRITING_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.UNDERWRITING_DATE"/>
      <TRANSFORMFIELD NAME="M_LOAN_OFFICER_ID" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" MASTERPORT="Y" SOURCE="SQ_APPROVED_LOANS.LOAN_OFFICER_ID"/>
      
      <!-- Detail input ports (from SQ_RATE_SHEET) -->
      <TRANSFORMFIELD NAME="D_RATE_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" MASTERPORT="N" SOURCE="SQ_RATE_SHEET.RATE_ID"/>
      <TRANSFORMFIELD NAME="D_LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" MASTERPORT="N" SOURCE="SQ_RATE_SHEET.LOAN_TYPE"/>
      <TRANSFORMFIELD NAME="D_TERM_MONTHS" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" MASTERPORT="N" SOURCE="SQ_RATE_SHEET.TERM_MONTHS"/>
      <TRANSFORMFIELD NAME="D_CREDIT_TIER" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" MASTERPORT="N" SOURCE="SQ_RATE_SHEET.CREDIT_TIER"/>
      <TRANSFORMFIELD NAME="D_LTV_BUCKET" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" MASTERPORT="N" SOURCE="SQ_RATE_SHEET.LTV_BUCKET"/>
      <TRANSFORMFIELD NAME="D_MIN_CREDIT_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" MASTERPORT="N" SOURCE="SQ_RATE_SHEET.MIN_CREDIT_SCORE"/>
      <TRANSFORMFIELD NAME="D_BASE_RATE" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" MASTERPORT="N" SOURCE="SQ_RATE_SHEET.BASE_RATE"/>
      <TRANSFORMFIELD NAME="D_POINTS" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" MASTERPORT="N" SOURCE="SQ_RATE_SHEET.POINTS"/>
      <TRANSFORMFIELD NAME="D_RATE_EFFECTIVE_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" MASTERPORT="N" SOURCE="SQ_RATE_SHEET.RATE_EFFECTIVE_DATE"/>
      <TRANSFORMFIELD NAME="D_RATE_EXPIRY_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" MASTERPORT="N" SOURCE="SQ_RATE_SHEET.RATE_EXPIRY_DATE"/>
      
      <!-- Output ports -->
      <TRANSFORMFIELD NAME="APPLICATION_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="LOAN_AMOUNT" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="LOAN_TERM_MONTHS" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="OCCUPANCY_TYPE" DATATYPE="STRING" LENGTH="30" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="PROPERTY_STATE" DATATYPE="STRING" LENGTH="2" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="BUREAU_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="CREDIT_TIER" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="ACTUAL_LTV" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="DTI_RATIO" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="REQUIRES_PMI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="IS_REFI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="UNDERWRITING_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="LOAN_OFFICER_ID" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="RATE_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="BASE_RATE" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="POINTS" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="LTV_BUCKET" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="MIN_CREDIT_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="RATE_EFFECTIVE_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="RATE_EXPIRY_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" ISOUTPUT="Y"/>
    </TRANSFORMATION>
    
    <!-- Transformation 4: Connected Lookup for FEE_SCHEDULE -->
    <TRANSFORMATION NAME="LKP_FEE_SCHEDULE" TYPE="Lookup" OBJECTID="3004" SOURCECONNECTION="$$FEE_CONN">
      <DESCRIPTION>Connected lookup on FEE_SCHEDULE to retrieve origination and other fees</DESCRIPTION>
      <LOOKUPSOURCE NAME="FEE_SCHEDULE" SCHEMA="RATE_MGT" OWNER="RATE_OWNER" LOOKUPTYPE="Connected"/>
      <LOOKUPCONDITION>
        <CONDITION INPUT="LOAN_TYPE" LOOKUPFIELD="LOAN_TYPE" OPERATOR="="/>
        <CONDITION INPUT="OCCUPANCY_TYPE" LOOKUPFIELD="OCCUPANCY_TYPE" OPERATOR="=" LOGICALOP="AND"/>
        <CONDITION INPUT="PROPERTY_STATE" LOOKUPFIELD="PROPERTY_STATE" OPERATOR="=" LOGICALOP="AND"/>
        <CONDITION INPUT="LOAD_DATE_VAR" LOOKUPFIELD="EFFECTIVE_DATE" OPERATOR=">=" LOGICALOP="AND"/>
      </LOOKUPCONDITION>
      
      <!-- Input ports -->
      <TRANSFORMFIELD NAME="LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="OCCUPANCY_TYPE" DATATYPE="STRING" LENGTH="30" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="PROPERTY_STATE" DATATYPE="STRING" LENGTH="2" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="LOAD_DATE_VAR" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      
      <!-- Return ports -->
      <TRANSFORMFIELD NAME="ORIGINATION_FEE_PCT" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="APPRAISAL_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="TITLE_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="RECORDING_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" ISOUTPUT="Y"/>
      <TRANSFORMFIELD NAME="PMI_MONTHLY_RATE" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" ISOUTPUT="Y"/>
      
      <!-- Lookup flags -->
      <CACHEMODE>DYNAMIC</CACHEMODE>
      <CACHETYPE>STATIC</CACHETYPE>
    </TRANSFORMATION>
    
    <!-- Transformation 5: Expression for Pricing Calculations -->
    <TRANSFORMATION NAME="EXP_CALCULATE_PRICING" TYPE="Expression" OBJECTID="3005">
      <DESCRIPTION>Calculate interest rates, closing costs, PMI, monthly payment, total interest, and APR</DESCRIPTION>
      
      <!-- Input ports -->
      <TRANSFORMFIELD NAME="APPLICATION_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="LOAN_AMOUNT" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="LOAN_TERM_MONTHS" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="OCCUPANCY_TYPE" DATATYPE="STRING" LENGTH="30" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="PROPERTY_STATE" DATATYPE="STRING" LENGTH="2" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="BUREAU_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="CREDIT_TIER" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="ACTUAL_LTV" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="DTI_RATIO" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="REQUIRES_PMI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="IS_REFI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="UNDERWRITING_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="LOAN_OFFICER_ID" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="RATE_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="BASE_RATE" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="POINTS" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="LTV_BUCKET" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="MIN_CREDIT_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="RATE_EFFECTIVE_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="RATE_EXPIRY_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="ORIGINATION_FEE_PCT" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="APPRAISAL_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="TITLE_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="RECORDING_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" ISINPUT="Y"/>
      <TRANSFORMFIELD NAME="PMI_MONTHLY_RATE" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" ISINPUT="Y"/>
      
      <!-- Output ports with expressions -->
      <TRANSFORMFIELD NAME="OFFERED_RATE" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" ISOUTPUT="Y">
        <EXPRESSION>IIF(ISNULL(BASE_RATE), 0, BASE_RATE)</EXPRESSION>
      </TRANSFORMFIELD>
      
      <TRANSFORMFIELD NAME="ORIGINATION_FEE_AMT" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" ISOUTPUT="Y">
        <EXPRESSION>LOAN_AMOUNT * ORIGINATION_FEE_PCT / 100</EXPRESSION>
      </TRANSFORMFIELD>
      
      <TRANSFORMFIELD NAME="TOTAL_CLOSING_COSTS" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" ISOUTPUT="Y">
        <EXPRESSION>ORIGINATION_FEE_AMT + APPRAISAL_FEE + TITLE_FEE + RECORDING_FEE</EXPRESSION>
      </TRANSFORMFIELD>
      
      <TRANSFORMFIELD NAME="MONTHLY_PMI" DATATYPE="DECIMAL" LENGTH="12" SCALE="2" PRECISION="12" ISOUTPUT="Y">
        <EXPRESSION>IIF(REQUIRES_PMI='Y', LOAN_AMOUNT * PMI_MONTHLY_RATE / 100 / 12, 0)</EXPRESSION>
      </TRANSFORMFIELD>
      
      <TRANSFORMFIELD NAME="MONTHLY_PAYMENT" DATATYPE="DECIMAL" LENGTH="12" SCALE="2" PRECISION="12" ISOUTPUT="Y">
        <EXPRESSION>LOAN_AMOUNT * (OFFERED_RATE/1200) / (1 - POWER(1+OFFERED_RATE/1200, -LOAN_TERM_MONTHS))</EXPRESSION>
      </TRANSFORMFIELD>
      
      <TRANSFORMFIELD NAME="TOTAL_INTEREST" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" ISOUTPUT="Y">
        <EXPRESSION>(MONTHLY_PAYMENT * LOAN_TERM_MONTHS) - LOAN_AMOUNT</EXPRESSION>
      </TRANSFORMFIELD>
      
      <TRANSFORMFIELD NAME="APR_NUMERATOR" DATATYPE="DECIMAL" LENGTH="12" SCALE="4" PRECISION="12" ISOUTPUT="Y">
        <EXPRESSION>(TOTAL_INTEREST + TOTAL_CLOSING_COSTS) / LOAN_AMOUNT</EXPRESSION>
      </TRANSFORMFIELD>
      
      <TRANSFORMFIELD NAME="APR" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" ISOUTPUT="Y">
        <EXPRESSION>APR_NUMERATOR / (LOAN_TERM_MONTHS / 12) * 100</EXPRESSION>
      </TRANSFORMFIELD>
      
      <TRANSFORMFIELD NAME="PRICING_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" ISOUTPUT="Y">
        <EXPRESSION>GETDATE()</EXPRESSION>
      </TRANSFORMFIELD>
      
      <!-- Passthrough fields -->
      <TRANSFORMFIELD NAME="OUT_APPLICATION_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" ISOUTPUT="Y">
        <EXPRESSION>APPLICATION_ID</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_LOAN_AMOUNT" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" ISOUTPUT="Y">
        <EXPRESSION>LOAN_AMOUNT</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" ISOUTPUT="Y">
        <EXPRESSION>LOAN_TYPE</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_LOAN_TERM_MONTHS" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" ISOUTPUT="Y">
        <EXPRESSION>LOAN_TERM_MONTHS</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_CREDIT_TIER" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" ISOUTPUT="Y">
        <EXPRESSION>CREDIT_TIER</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_BUREAU_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" ISOUTPUT="Y">
        <EXPRESSION>BUREAU_SCORE</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_ACTUAL_LTV" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISOUTPUT="Y">
        <EXPRESSION>ACTUAL_LTV</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_DTI_RATIO" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISOUTPUT="Y">
        <EXPRESSION>DTI_RATIO</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_REQUIRES_PMI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" ISOUTPUT="Y">
        <EXPRESSION>REQUIRES_PMI</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_IS_REFI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" ISOUTPUT="Y">
        <EXPRESSION>IS_REFI</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_POINTS" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" ISOUTPUT="Y">
        <EXPRESSION>POINTS</EXPRESSION>
      </TRANSFORMFIELD>
      <TRANSFORMFIELD NAME="OUT_LOAN_OFFICER_ID" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" ISOUTPUT="Y">
        <EXPRESSION>LOAN_OFFICER_ID</EXPRESSION>
      </TRANSFORMFIELD>
    </TRANSFORMATION>
    
    <!-- =====================================================================
         TARGET DEFINITION
         ===================================================================== -->
    
    <TARGET NAME="TGT_PRICED_LOANS" TARGETTYPE="Relational" TARGETCONNECTION="$$TGT_CONNECTION" OBJECTID="4001">
      <TARGETCONNECTION>$$TGT_CONNECTION</TARGETCONNECTION>
      <TARGETTABLE NAME="TGT_PRICED_LOANS" SCHEMA="STG" OWNER="MORTGAGE_ETL" CREATETARGET="Y" TRUNCATETARGET="N"/>
      
      <!-- Key fields from loans -->
      <TARGETFIELD NAME="APPLICATION_ID" DATATYPE="STRING" LENGTH="50" SCALE="0" PRECISION="0" NULLABLE="N" PRIMARYKEY="Y"/>
      <TARGETFIELD NAME="LOAN_AMOUNT" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" NULLABLE="N"/>
      <TARGETFIELD NAME="LOAN_TYPE" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <TARGETFIELD NAME="LOAN_TERM_MONTHS" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <TARGETFIELD NAME="CREDIT_TIER" DATATYPE="STRING" LENGTH="10" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <TARGETFIELD NAME="BUREAU_SCORE" DATATYPE="INT" LENGTH="4" SCALE="0" PRECISION="0" NULLABLE="Y"/>
      <TARGETFIELD NAME="ACTUAL_LTV" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" NULLABLE="N"/>
      <TARGETFIELD NAME="DTI_RATIO" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" NULLABLE="N"/>
      <TARGETFIELD NAME="REQUIRES_PMI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <TARGETFIELD NAME="IS_REFI" DATATYPE="STRING" LENGTH="1" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <TARGETFIELD NAME="POINTS" DATATYPE="DECIMAL" LENGTH="5" SCALE="2" PRECISION="5" NULLABLE="Y"/>
      <TARGETFIELD NAME="LOAN_OFFICER_ID" DATATYPE="STRING" LENGTH="20" SCALE="0" PRECISION="0" NULLABLE="Y"/>
      
      <!-- Calculated pricing fields -->
      <TARGETFIELD NAME="OFFERED_RATE" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" NULLABLE="N" COMMENT="Interest rate offered to customer"/>
      <TARGETFIELD NAME="APR" DATATYPE="DECIMAL" LENGTH="5" SCALE="3" PRECISION="5" NULLABLE="N" COMMENT="Annual Percentage Rate including all costs"/>
      <TARGETFIELD NAME="MONTHLY_PAYMENT" DATATYPE="DECIMAL" LENGTH="12" SCALE="2" PRECISION="12" NULLABLE="N" COMMENT="Principal and interest monthly payment"/>
      <TARGETFIELD NAME="MONTHLY_PMI" DATATYPE="DECIMAL" LENGTH="12" SCALE="2" PRECISION="12" NULLABLE="Y" COMMENT="Monthly private mortgage insurance if applicable"/>
      <TARGETFIELD NAME="TOTAL_INTEREST" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" NULLABLE="N" COMMENT="Total interest over loan term"/>
      <TARGETFIELD NAME="ORIGINATION_FEE_AMT" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" NULLABLE="N" COMMENT="Origination fee dollar amount"/>
      <TARGETFIELD NAME="APPRAISAL_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" NULLABLE="N" COMMENT="Property appraisal fee"/>
      <TARGETFIELD NAME="TITLE_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" NULLABLE="N" COMMENT="Title insurance and search fee"/>
      <TARGETFIELD NAME="RECORDING_FEE" DATATYPE="DECIMAL" LENGTH="10" SCALE="2" PRECISION="10" NULLABLE="N" COMMENT="County recording fees"/>
      <TARGETFIELD NAME="TOTAL_CLOSING_COSTS" DATATYPE="DECIMAL" LENGTH="15" SCALE="2" PRECISION="15" NULLABLE="N" COMMENT="Sum of all closing costs"/>
      
      <!-- Metadata fields -->
      <TARGETFIELD NAME="PRICING_DATE" DATATYPE="DATE" LENGTH="10" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <TARGETFIELD NAME="CREATED_AT" DATATYPE="TIMESTAMP" LENGTH="26" SCALE="0" PRECISION="0" NULLABLE="N"/>
      <TARGETFIELD NAME="UPDATED_AT" DATATYPE="TIMESTAMP" LENGTH="26" SCALE="0" PRECISION="0" NULLABLE="N"/>
    </TARGET>
    
    <!-- =====================================================================
         CONNECTORS - Data Flow Links
         ===================================================================== -->
    
    <CONNECTOR SOURCE="SQ_APPROVED_LOANS" TARGET="JNR_LOANS_RATES" TYPE="Relational"/>
    <CONNECTOR SOURCE="SQ_RATE_SHEET" TARGET="JNR_LOANS_RATES" TYPE="Relational"/>
    <CONNECTOR SOURCE="JNR_LOANS_RATES" TARGET="LKP_FEE_SCHEDULE" TYPE="Relational"/>
    <CONNECTOR SOURCE="LKP_FEE_SCHEDULE" TARGET="EXP_CALCULATE_PRICING" TYPE="Relational"/>
    <CONNECTOR SOURCE="EXP_CALCULATE_PRICING" TARGET="TGT_PRICED_LOANS" TYPE="Relational"/>
    
  </MAPPING>
</REPOSITORY>
