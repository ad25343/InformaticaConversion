<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE POWERMART SYSTEM "powrmart.dtd">
<!--
  Mapping  : m_GSE_UNION_DELIVERY
  Purpose  : Consolidate Fannie Mae (FNMA) and Freddie Mac (FHLMC) monthly delivery
             files — which share the same logical schema — into a single GSE delivery
             staging table. A Union transformation merges the two streams; an Expression
             adds the GSE_SOURCE label before writing to the target.
  Complexity: SIMPLE  →  dbt target
  Sources  :
    1. FNMA_DELIVERY_MONTHLY.txt  — Fannie Mae monthly file (pipe-delimited, no header)
    2. FHLMC_DELIVERY_MONTHLY.txt — Freddie Mac monthly file (pipe-delimited, no header)
       Note: Both files use the same field layout per the GSE harmonised delivery spec.
  Transformations:
    SQ_FNMA → ┐
               ├─ UNI_GSE_DELIVERY → EXP_ADD_SOURCE → TGT_STG_GSE_DELIVERY
    SQ_FHLMC → ┘
  Key pattern — UNION:
    The Union transformation merges two upstream streams with identical port schemas.
    Unlike a Joiner (which requires a key condition), the Union simply concatenates
    rows from all input pipelines — equivalent to SQL UNION ALL.
  Target   : STG_GSE_DELIVERY (Snowflake)
-->
<POWERMART CREATION_DATE="02/15/2026 11:00:00" REPOSITORY_VERSION="186.94">
<REPOSITORY NAME="MORTGAGE_DW" VERSION="186.94" CODEPAGE="UTF-8" DATABASETYPE="Oracle">

<FOLDER NAME="GSE_DELIVERY" GROUP="" DESCRIPTION="GSE consolidated delivery pipeline — Union pattern" PERMISSIONS="rwx---r--" SHARED="SHARED">

<!-- ═══════════════════════════════════════════════════════════
     SOURCE DEFINITIONS
     Both files share an identical 14-column layout per the
     harmonised FNMA/FHLMC single-family delivery specification.
═══════════════════════════════════════════════════════════ -->

<SOURCE BUSINESSNAME="FNMA Monthly Delivery File"
        DATABASETYPE="FLAT FILE"
        DBDNAME=""
        DESCRIPTION="Fannie Mae single-family monthly delivery extract. Pipe-delimited, no header. Harmonised GSE layout."
        NAME="FNMA_DELIVERY_MONTHLY"
        OBJECTVERSION="1"
        OWNERNAME=""
        VERSIONNUMBER="1">
  <TABLEATTRIBUTE NAME="File Type"           VALUE="Delimited"/>
  <TABLEATTRIBUTE NAME="Delimiter"           VALUE="|"/>
  <TABLEATTRIBUTE NAME="Row Delimiter"       VALUE="LF"/>
  <TABLEATTRIBUTE NAME="Quote Character"     VALUE="None"/>
  <TABLEATTRIBUTE NAME="Skip Rows"           VALUE="0"/>
  <TABLEATTRIBUTE NAME="Import Column Names" VALUE="NO"/>
  <TABLEATTRIBUTE NAME="Code Page"           VALUE="UTF-8"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="FNMA 13-digit loan identifier"                       FIELDNUMBER="1"  FIELDPROPERTY="0" LENGTH="13" NAME="LOAN_IDENTIFIER"    NULLABLE="NOTNULL" PRECISION="13" SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Reporting period YYYYMM"                              FIELDNUMBER="2"  FIELDPROPERTY="0" LENGTH="6"  NAME="REPORTING_PERIOD"  NULLABLE="NOTNULL" PRECISION="6"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="decimal" DESCRIPTION="Original unpaid principal balance"                    FIELDNUMBER="3"  FIELDPROPERTY="0" LENGTH="12" NAME="ORIGINAL_UPB"       NULLABLE="NOTNULL" PRECISION="12" SCALE="2"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="decimal" DESCRIPTION="Current unpaid principal balance"                     FIELDNUMBER="4"  FIELDPROPERTY="0" LENGTH="12" NAME="CURRENT_UPB"         NULLABLE="NOTNULL" PRECISION="12" SCALE="2"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="decimal" DESCRIPTION="Note rate (annual %)"                                 FIELDNUMBER="5"  FIELDPROPERTY="0" LENGTH="7"  NAME="NOTE_RATE"           NULLABLE="NOTNULL" PRECISION="7"  SCALE="3"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Origination date YYYYMM"                              FIELDNUMBER="6"  FIELDPROPERTY="0" LENGTH="6"  NAME="ORIGINATION_DATE"   NULLABLE="NOTNULL" PRECISION="6"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="integer" DESCRIPTION="Original loan term in months"                         FIELDNUMBER="7"  FIELDPROPERTY="0" LENGTH="3"  NAME="ORIGINAL_TERM"       NULLABLE="NOTNULL" PRECISION="3"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="decimal" DESCRIPTION="Original LTV ratio"                                   FIELDNUMBER="8"  FIELDPROPERTY="0" LENGTH="5"  NAME="ORIGINAL_LTV"        NULLABLE="NOTNULL" PRECISION="5"  SCALE="2"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Loan purpose: P=Purchase, C=Cash-Out Refi, N=No-Cash Refi" FIELDNUMBER="9"  FIELDPROPERTY="0" LENGTH="1"  NAME="LOAN_PURPOSE"        NULLABLE="NOTNULL" PRECISION="1"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Property type: SF, CO, PU, MH"                        FIELDNUMBER="10" FIELDPROPERTY="0" LENGTH="2"  NAME="PROPERTY_TYPE"       NULLABLE="NOTNULL" PRECISION="2"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="2-letter state code"                                  FIELDNUMBER="11" FIELDPROPERTY="0" LENGTH="2"  NAME="PROPERTY_STATE"      NULLABLE="NOTNULL" PRECISION="2"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Current delinquency status code"                      FIELDNUMBER="12" FIELDPROPERTY="0" LENGTH="2"  NAME="DELINQUENCY_STATUS"  NULLABLE="NOTNULL" PRECISION="2"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Servicer NMLS ID"                                     FIELDNUMBER="13" FIELDPROPERTY="0" LENGTH="12" NAME="SERVICER_ID"          NULLABLE="NULLABLE" PRECISION="12" SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Zero balance code (null if still active)"             FIELDNUMBER="14" FIELDPROPERTY="0" LENGTH="2"  NAME="ZERO_BALANCE_CODE"   NULLABLE="NULLABLE" PRECISION="2"  SCALE="0"/>
</SOURCE>

<SOURCE BUSINESSNAME="FHLMC Monthly Delivery File"
        DATABASETYPE="FLAT FILE"
        DBDNAME=""
        DESCRIPTION="Freddie Mac single-family monthly delivery extract. Pipe-delimited, no header. Same harmonised layout as FNMA file — column positions and datatypes are identical."
        NAME="FHLMC_DELIVERY_MONTHLY"
        OBJECTVERSION="1"
        OWNERNAME=""
        VERSIONNUMBER="1">
  <TABLEATTRIBUTE NAME="File Type"           VALUE="Delimited"/>
  <TABLEATTRIBUTE NAME="Delimiter"           VALUE="|"/>
  <TABLEATTRIBUTE NAME="Row Delimiter"       VALUE="LF"/>
  <TABLEATTRIBUTE NAME="Quote Character"     VALUE="None"/>
  <TABLEATTRIBUTE NAME="Skip Rows"           VALUE="0"/>
  <TABLEATTRIBUTE NAME="Import Column Names" VALUE="NO"/>
  <TABLEATTRIBUTE NAME="Code Page"           VALUE="UTF-8"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="FHLMC loan identifier (same 13-char format as FNMA)" FIELDNUMBER="1"  FIELDPROPERTY="0" LENGTH="13" NAME="LOAN_IDENTIFIER"    NULLABLE="NOTNULL" PRECISION="13" SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Reporting period YYYYMM"                              FIELDNUMBER="2"  FIELDPROPERTY="0" LENGTH="6"  NAME="REPORTING_PERIOD"  NULLABLE="NOTNULL" PRECISION="6"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="decimal" DESCRIPTION="Original unpaid principal balance"                    FIELDNUMBER="3"  FIELDPROPERTY="0" LENGTH="12" NAME="ORIGINAL_UPB"       NULLABLE="NOTNULL" PRECISION="12" SCALE="2"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="decimal" DESCRIPTION="Current unpaid principal balance"                     FIELDNUMBER="4"  FIELDPROPERTY="0" LENGTH="12" NAME="CURRENT_UPB"         NULLABLE="NOTNULL" PRECISION="12" SCALE="2"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="decimal" DESCRIPTION="Note rate (annual %)"                                 FIELDNUMBER="5"  FIELDPROPERTY="0" LENGTH="7"  NAME="NOTE_RATE"           NULLABLE="NOTNULL" PRECISION="7"  SCALE="3"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Origination date YYYYMM"                              FIELDNUMBER="6"  FIELDPROPERTY="0" LENGTH="6"  NAME="ORIGINATION_DATE"   NULLABLE="NOTNULL" PRECISION="6"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="integer" DESCRIPTION="Original loan term in months"                         FIELDNUMBER="7"  FIELDPROPERTY="0" LENGTH="3"  NAME="ORIGINAL_TERM"       NULLABLE="NOTNULL" PRECISION="3"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="decimal" DESCRIPTION="Original LTV ratio"                                   FIELDNUMBER="8"  FIELDPROPERTY="0" LENGTH="5"  NAME="ORIGINAL_LTV"        NULLABLE="NOTNULL" PRECISION="5"  SCALE="2"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Loan purpose code"                                    FIELDNUMBER="9"  FIELDPROPERTY="0" LENGTH="1"  NAME="LOAN_PURPOSE"        NULLABLE="NOTNULL" PRECISION="1"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Property type code"                                   FIELDNUMBER="10" FIELDPROPERTY="0" LENGTH="2"  NAME="PROPERTY_TYPE"       NULLABLE="NOTNULL" PRECISION="2"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="2-letter state code"                                  FIELDNUMBER="11" FIELDPROPERTY="0" LENGTH="2"  NAME="PROPERTY_STATE"      NULLABLE="NOTNULL" PRECISION="2"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Current delinquency status code"                      FIELDNUMBER="12" FIELDPROPERTY="0" LENGTH="2"  NAME="DELINQUENCY_STATUS"  NULLABLE="NOTNULL" PRECISION="2"  SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Servicer NMLS ID"                                     FIELDNUMBER="13" FIELDPROPERTY="0" LENGTH="12" NAME="SERVICER_ID"          NULLABLE="NULLABLE" PRECISION="12" SCALE="0"/>
  <SOURCEFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="Zero balance code"                                    FIELDNUMBER="14" FIELDPROPERTY="0" LENGTH="2"  NAME="ZERO_BALANCE_CODE"   NULLABLE="NULLABLE" PRECISION="2"  SCALE="0"/>
</SOURCE>

<!-- ═══════════════════════════════════════════════════════════
     TARGET DEFINITION
═══════════════════════════════════════════════════════════ -->

<TARGET BUSINESSNAME="GSE Consolidated Delivery Staging"
        CONSTRAINT=""
        DATABASETYPE="Snowflake"
        DESCRIPTION="Unified staging table for both FNMA and FHLMC monthly delivery data. GSE_SOURCE column identifies the originating entity. Truncate-and-reload each period."
        NAME="STG_GSE_DELIVERY"
        OBJECTVERSION="1"
        TABLEOPTIONS=""
        VERSIONNUMBER="1">
  <TARGETFIELD BUSINESSNAME="" DATATYPE="string"  DESCRIPTION="FNMA or FHLMC — identifies the GSE that originated the row"           FIELDNUMBER="1"  KEYTYPE="NOT A KEY" LENGTH="5"  NAME="GSE_SOURCE"         NULLABLE="NOTNULL" PRECISION="5"  SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="string"  FIELDNUMBER="2"  KEYTYPE="NOT A KEY" LENGTH="13" NAME="LOAN_IDENTIFIER"    NULLABLE="NOTNULL" PRECISION="13" SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="string"  FIELDNUMBER="3"  KEYTYPE="NOT A KEY" LENGTH="6"  NAME="REPORTING_PERIOD"  NULLABLE="NOTNULL" PRECISION="6"  SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="decimal" FIELDNUMBER="4"  KEYTYPE="NOT A KEY" LENGTH="12" NAME="ORIGINAL_UPB"       NULLABLE="NOTNULL" PRECISION="12" SCALE="2"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="decimal" FIELDNUMBER="5"  KEYTYPE="NOT A KEY" LENGTH="12" NAME="CURRENT_UPB"         NULLABLE="NOTNULL" PRECISION="12" SCALE="2"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="decimal" FIELDNUMBER="6"  KEYTYPE="NOT A KEY" LENGTH="7"  NAME="NOTE_RATE"           NULLABLE="NOTNULL" PRECISION="7"  SCALE="3"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="string"  FIELDNUMBER="7"  KEYTYPE="NOT A KEY" LENGTH="6"  NAME="ORIGINATION_DATE"   NULLABLE="NOTNULL" PRECISION="6"  SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="integer" FIELDNUMBER="8"  KEYTYPE="NOT A KEY" LENGTH="3"  NAME="ORIGINAL_TERM"       NULLABLE="NOTNULL" PRECISION="3"  SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="decimal" FIELDNUMBER="9"  KEYTYPE="NOT A KEY" LENGTH="5"  NAME="ORIGINAL_LTV"        NULLABLE="NOTNULL" PRECISION="5"  SCALE="2"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="string"  FIELDNUMBER="10" KEYTYPE="NOT A KEY" LENGTH="1"  NAME="LOAN_PURPOSE"        NULLABLE="NOTNULL" PRECISION="1"  SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="string"  FIELDNUMBER="11" KEYTYPE="NOT A KEY" LENGTH="2"  NAME="PROPERTY_TYPE"       NULLABLE="NOTNULL" PRECISION="2"  SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="string"  FIELDNUMBER="12" KEYTYPE="NOT A KEY" LENGTH="2"  NAME="PROPERTY_STATE"      NULLABLE="NOTNULL" PRECISION="2"  SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="string"  FIELDNUMBER="13" KEYTYPE="NOT A KEY" LENGTH="2"  NAME="DELINQUENCY_STATUS"  NULLABLE="NOTNULL" PRECISION="2"  SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="string"  FIELDNUMBER="14" KEYTYPE="NOT A KEY" LENGTH="12" NAME="SERVICER_ID"          NULLABLE="NULLABLE" PRECISION="12" SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="string"  FIELDNUMBER="15" KEYTYPE="NOT A KEY" LENGTH="2"  NAME="ZERO_BALANCE_CODE"   NULLABLE="NULLABLE" PRECISION="2"  SCALE="0"/>
  <TARGETFIELD BUSINESSNAME="" DATATYPE="timestamp" FIELDNUMBER="16" KEYTYPE="NOT A KEY" LENGTH="29" NAME="LOAD_TIMESTAMP"    NULLABLE="NOTNULL" PRECISION="29" SCALE="9"/>
</TARGET>

<!-- ═══════════════════════════════════════════════════════════
     MAPPING
═══════════════════════════════════════════════════════════ -->
<MAPPING DESCRIPTION="Reads FNMA and FHLMC monthly delivery flat files (identical schema), merges them via a Union transformation (UNION ALL semantics), tags each row with GSE_SOURCE='FNMA' or 'FHLMC' via an Expression, and writes to STG_GSE_DELIVERY."
         ISVALID="YES"
         NAME="m_GSE_UNION_DELIVERY"
         OBJECTVERSION="1"
         VERSIONNUMBER="1">

  <!-- ── Source Qualifier 1: FNMA ── -->
  <TRANSFORMATION DESCRIPTION="Read FNMA monthly delivery flat file. Basic filter: LOAN_IDENTIFIER and REPORTING_PERIOD must not be null."
                  NAME="SQ_FNMA_DELIVERY"
                  OBJECTVERSION="1"
                  REUSABLE="NO"
                  TYPE="Source Qualifier"
                  VERSIONNUMBER="1">
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="13" NAME="LOAN_IDENTIFIER"   PORTTYPE="INPUT/OUTPUT" PRECISION="13" SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="REPORTING_PERIOD"  PORTTYPE="INPUT/OUTPUT" PRECISION="6"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="ORIGINAL_UPB"      PORTTYPE="INPUT/OUTPUT" PRECISION="12" SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="CURRENT_UPB"        PORTTYPE="INPUT/OUTPUT" PRECISION="12" SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="7"  NAME="NOTE_RATE"          PORTTYPE="INPUT/OUTPUT" PRECISION="7"  SCALE="3"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="ORIGINATION_DATE"  PORTTYPE="INPUT/OUTPUT" PRECISION="6"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="integer" LENGTH="3"  NAME="ORIGINAL_TERM"      PORTTYPE="INPUT/OUTPUT" PRECISION="3"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="5"  NAME="ORIGINAL_LTV"       PORTTYPE="INPUT/OUTPUT" PRECISION="5"  SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="1"  NAME="LOAN_PURPOSE"       PORTTYPE="INPUT/OUTPUT" PRECISION="1"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="PROPERTY_TYPE"      PORTTYPE="INPUT/OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="PROPERTY_STATE"     PORTTYPE="INPUT/OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="DELINQUENCY_STATUS" PORTTYPE="INPUT/OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="12" NAME="SERVICER_ID"         PORTTYPE="INPUT/OUTPUT" PRECISION="12" SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="ZERO_BALANCE_CODE"  PORTTYPE="INPUT/OUTPUT" PRECISION="2"  SCALE="0"/>
    <TABLEATTRIBUTE NAME="Filter" VALUE="LOAN_IDENTIFIER IS NOT NULL AND REPORTING_PERIOD IS NOT NULL"/>
  </TRANSFORMATION>

  <!-- ── Source Qualifier 2: FHLMC ── -->
  <TRANSFORMATION DESCRIPTION="Read FHLMC monthly delivery flat file. Same filter as FNMA qualifier."
                  NAME="SQ_FHLMC_DELIVERY"
                  OBJECTVERSION="1"
                  REUSABLE="NO"
                  TYPE="Source Qualifier"
                  VERSIONNUMBER="1">
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="13" NAME="LOAN_IDENTIFIER"   PORTTYPE="INPUT/OUTPUT" PRECISION="13" SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="REPORTING_PERIOD"  PORTTYPE="INPUT/OUTPUT" PRECISION="6"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="ORIGINAL_UPB"      PORTTYPE="INPUT/OUTPUT" PRECISION="12" SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="CURRENT_UPB"        PORTTYPE="INPUT/OUTPUT" PRECISION="12" SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="7"  NAME="NOTE_RATE"          PORTTYPE="INPUT/OUTPUT" PRECISION="7"  SCALE="3"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="ORIGINATION_DATE"  PORTTYPE="INPUT/OUTPUT" PRECISION="6"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="integer" LENGTH="3"  NAME="ORIGINAL_TERM"      PORTTYPE="INPUT/OUTPUT" PRECISION="3"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="5"  NAME="ORIGINAL_LTV"       PORTTYPE="INPUT/OUTPUT" PRECISION="5"  SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="1"  NAME="LOAN_PURPOSE"       PORTTYPE="INPUT/OUTPUT" PRECISION="1"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="PROPERTY_TYPE"      PORTTYPE="INPUT/OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="PROPERTY_STATE"     PORTTYPE="INPUT/OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="DELINQUENCY_STATUS" PORTTYPE="INPUT/OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="12" NAME="SERVICER_ID"         PORTTYPE="INPUT/OUTPUT" PRECISION="12" SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="ZERO_BALANCE_CODE"  PORTTYPE="INPUT/OUTPUT" PRECISION="2"  SCALE="0"/>
    <TABLEATTRIBUTE NAME="Filter" VALUE="LOAN_IDENTIFIER IS NOT NULL AND REPORTING_PERIOD IS NOT NULL"/>
  </TRANSFORMATION>

  <!-- ── Union: merge FNMA and FHLMC streams ── -->
  <TRANSFORMATION DESCRIPTION="Union transformation merges the FNMA and FHLMC delivery streams into a single pipeline. Semantics are UNION ALL — duplicate loan IDs across the two GSEs are kept (they are distinct entities). Each input group maps to the same output port list. The downstream Expression adds GSE_SOURCE to distinguish the origin."
                  NAME="UNI_GSE_DELIVERY"
                  OBJECTVERSION="1"
                  REUSABLE="NO"
                  TYPE="Union"
                  VERSIONNUMBER="1">
    <!-- Input Group 1: FNMA ports -->
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="13" NAME="FNMA_LOAN_IDENTIFIER"   PORTTYPE="INPUT" PRECISION="13" SCALE="0" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="FNMA_REPORTING_PERIOD"  PORTTYPE="INPUT" PRECISION="6"  SCALE="0" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="FNMA_ORIGINAL_UPB"      PORTTYPE="INPUT" PRECISION="12" SCALE="2" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="FNMA_CURRENT_UPB"        PORTTYPE="INPUT" PRECISION="12" SCALE="2" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="7"  NAME="FNMA_NOTE_RATE"          PORTTYPE="INPUT" PRECISION="7"  SCALE="3" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="FNMA_ORIGINATION_DATE"  PORTTYPE="INPUT" PRECISION="6"  SCALE="0" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="integer" LENGTH="3"  NAME="FNMA_ORIGINAL_TERM"      PORTTYPE="INPUT" PRECISION="3"  SCALE="0" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="5"  NAME="FNMA_ORIGINAL_LTV"       PORTTYPE="INPUT" PRECISION="5"  SCALE="2" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="1"  NAME="FNMA_LOAN_PURPOSE"       PORTTYPE="INPUT" PRECISION="1"  SCALE="0" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="FNMA_PROPERTY_TYPE"      PORTTYPE="INPUT" PRECISION="2"  SCALE="0" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="FNMA_PROPERTY_STATE"     PORTTYPE="INPUT" PRECISION="2"  SCALE="0" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="FNMA_DELINQUENCY_STATUS" PORTTYPE="INPUT" PRECISION="2"  SCALE="0" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="12" NAME="FNMA_SERVICER_ID"         PORTTYPE="INPUT" PRECISION="12" SCALE="0" INPUTGROUPNAME="FNMA_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="FNMA_ZERO_BALANCE_CODE"  PORTTYPE="INPUT" PRECISION="2"  SCALE="0" INPUTGROUPNAME="FNMA_GROUP"/>
    <!-- Input Group 2: FHLMC ports -->
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="13" NAME="FHLMC_LOAN_IDENTIFIER"   PORTTYPE="INPUT" PRECISION="13" SCALE="0" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="FHLMC_REPORTING_PERIOD"  PORTTYPE="INPUT" PRECISION="6"  SCALE="0" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="FHLMC_ORIGINAL_UPB"      PORTTYPE="INPUT" PRECISION="12" SCALE="2" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="FHLMC_CURRENT_UPB"        PORTTYPE="INPUT" PRECISION="12" SCALE="2" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="7"  NAME="FHLMC_NOTE_RATE"          PORTTYPE="INPUT" PRECISION="7"  SCALE="3" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="FHLMC_ORIGINATION_DATE"  PORTTYPE="INPUT" PRECISION="6"  SCALE="0" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="integer" LENGTH="3"  NAME="FHLMC_ORIGINAL_TERM"      PORTTYPE="INPUT" PRECISION="3"  SCALE="0" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="5"  NAME="FHLMC_ORIGINAL_LTV"       PORTTYPE="INPUT" PRECISION="5"  SCALE="2" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="1"  NAME="FHLMC_LOAN_PURPOSE"       PORTTYPE="INPUT" PRECISION="1"  SCALE="0" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="FHLMC_PROPERTY_TYPE"      PORTTYPE="INPUT" PRECISION="2"  SCALE="0" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="FHLMC_PROPERTY_STATE"     PORTTYPE="INPUT" PRECISION="2"  SCALE="0" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="FHLMC_DELINQUENCY_STATUS" PORTTYPE="INPUT" PRECISION="2"  SCALE="0" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="12" NAME="FHLMC_SERVICER_ID"         PORTTYPE="INPUT" PRECISION="12" SCALE="0" INPUTGROUPNAME="FHLMC_GROUP"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="FHLMC_ZERO_BALANCE_CODE"  PORTTYPE="INPUT" PRECISION="2"  SCALE="0" INPUTGROUPNAME="FHLMC_GROUP"/>
    <!-- Unified output ports (one set, shared by both input groups) -->
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="13" NAME="LOAN_IDENTIFIER"   PORTTYPE="OUTPUT" PRECISION="13" SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="REPORTING_PERIOD"  PORTTYPE="OUTPUT" PRECISION="6"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="ORIGINAL_UPB"      PORTTYPE="OUTPUT" PRECISION="12" SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="CURRENT_UPB"        PORTTYPE="OUTPUT" PRECISION="12" SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="7"  NAME="NOTE_RATE"          PORTTYPE="OUTPUT" PRECISION="7"  SCALE="3"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="ORIGINATION_DATE"  PORTTYPE="OUTPUT" PRECISION="6"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="integer" LENGTH="3"  NAME="ORIGINAL_TERM"      PORTTYPE="OUTPUT" PRECISION="3"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="5"  NAME="ORIGINAL_LTV"       PORTTYPE="OUTPUT" PRECISION="5"  SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="1"  NAME="LOAN_PURPOSE"       PORTTYPE="OUTPUT" PRECISION="1"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="PROPERTY_TYPE"      PORTTYPE="OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="PROPERTY_STATE"     PORTTYPE="OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="DELINQUENCY_STATUS" PORTTYPE="OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="12" NAME="SERVICER_ID"         PORTTYPE="OUTPUT" PRECISION="12" SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="ZERO_BALANCE_CODE"  PORTTYPE="OUTPUT" PRECISION="2"  SCALE="0"/>
    <!-- Hidden GSE_SOURCE tracking port — set by the Union input group name mapping -->
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="5"  NAME="SOURCE_TAG"         PORTTYPE="OUTPUT" PRECISION="5"  SCALE="0"
                    DESCRIPTION="Carries 'FNMA' or 'FHLMC' based on which input group the row came from. Set via port mapping on each input group."/>
    <TABLEATTRIBUTE NAME="INPUT_GROUP_1" VALUE="FNMA_GROUP"/>
    <TABLEATTRIBUTE NAME="INPUT_GROUP_2" VALUE="FHLMC_GROUP"/>
  </TRANSFORMATION>

  <!-- ── Expression: tag GSE source ── -->
  <TRANSFORMATION DESCRIPTION="Minimal post-union expression. The Union SOURCE_TAG port carries 'FNMA' or 'FHLMC'. This expression simply validates it and passes all fields through to the target. Add any cross-GSE normalisation logic here if schema harmonisation is imperfect."
                  NAME="EXP_ADD_SOURCE"
                  OBJECTVERSION="1"
                  REUSABLE="NO"
                  TYPE="Expression"
                  VERSIONNUMBER="1">
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="5"  NAME="SOURCE_TAG"         PORTTYPE="INPUT" PRECISION="5"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="13" NAME="LOAN_IDENTIFIER"   PORTTYPE="INPUT" PRECISION="13" SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="REPORTING_PERIOD"  PORTTYPE="INPUT" PRECISION="6"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="ORIGINAL_UPB"      PORTTYPE="INPUT" PRECISION="12" SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="12" NAME="CURRENT_UPB"        PORTTYPE="INPUT" PRECISION="12" SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="7"  NAME="NOTE_RATE"          PORTTYPE="INPUT" PRECISION="7"  SCALE="3"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="6"  NAME="ORIGINATION_DATE"  PORTTYPE="INPUT" PRECISION="6"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="integer" LENGTH="3"  NAME="ORIGINAL_TERM"      PORTTYPE="INPUT" PRECISION="3"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="decimal" LENGTH="5"  NAME="ORIGINAL_LTV"       PORTTYPE="INPUT" PRECISION="5"  SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="1"  NAME="LOAN_PURPOSE"       PORTTYPE="INPUT" PRECISION="1"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="PROPERTY_TYPE"      PORTTYPE="INPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="PROPERTY_STATE"     PORTTYPE="INPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="DELINQUENCY_STATUS" PORTTYPE="INPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="12" NAME="SERVICER_ID"         PORTTYPE="INPUT" PRECISION="12" SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  LENGTH="2"  NAME="ZERO_BALANCE_CODE"  PORTTYPE="INPUT" PRECISION="2"  SCALE="0"/>

    <!-- GSE_SOURCE — validated and standardised -->
    <TRANSFORMFIELD DATATYPE="string"
                    DEFAULTVALUE=""
                    DESCRIPTION="Standardise GSE source label — defensive IIF in case SOURCE_TAG is null/unexpected"
                    EXPRESSION="IIF(SOURCE_TAG = 'FNMA', 'FNMA', IIF(SOURCE_TAG = 'FHLMC', 'FHLMC', 'OTHER'))"
                    LENGTH="5"
                    NAME="GSE_SOURCE"
                    PORTTYPE="OUTPUT"
                    PRECISION="5"
                    SCALE="0"/>

    <!-- Pass-throughs -->
    <TRANSFORMFIELD DATATYPE="string"  DEFAULTVALUE="" EXPRESSION="LOAN_IDENTIFIER"   LENGTH="13" NAME="o_LOAN_IDENTIFIER"   PORTTYPE="OUTPUT" PRECISION="13" SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  DEFAULTVALUE="" EXPRESSION="REPORTING_PERIOD"  LENGTH="6"  NAME="o_REPORTING_PERIOD"  PORTTYPE="OUTPUT" PRECISION="6"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="decimal" DEFAULTVALUE="" EXPRESSION="ORIGINAL_UPB"      LENGTH="12" NAME="o_ORIGINAL_UPB"      PORTTYPE="OUTPUT" PRECISION="12" SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="decimal" DEFAULTVALUE="" EXPRESSION="CURRENT_UPB"        LENGTH="12" NAME="o_CURRENT_UPB"        PORTTYPE="OUTPUT" PRECISION="12" SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="decimal" DEFAULTVALUE="" EXPRESSION="NOTE_RATE"          LENGTH="7"  NAME="o_NOTE_RATE"          PORTTYPE="OUTPUT" PRECISION="7"  SCALE="3"/>
    <TRANSFORMFIELD DATATYPE="string"  DEFAULTVALUE="" EXPRESSION="ORIGINATION_DATE"  LENGTH="6"  NAME="o_ORIGINATION_DATE"  PORTTYPE="OUTPUT" PRECISION="6"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="integer" DEFAULTVALUE="" EXPRESSION="ORIGINAL_TERM"      LENGTH="3"  NAME="o_ORIGINAL_TERM"      PORTTYPE="OUTPUT" PRECISION="3"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="decimal" DEFAULTVALUE="" EXPRESSION="ORIGINAL_LTV"       LENGTH="5"  NAME="o_ORIGINAL_LTV"       PORTTYPE="OUTPUT" PRECISION="5"  SCALE="2"/>
    <TRANSFORMFIELD DATATYPE="string"  DEFAULTVALUE="" EXPRESSION="LOAN_PURPOSE"       LENGTH="1"  NAME="o_LOAN_PURPOSE"       PORTTYPE="OUTPUT" PRECISION="1"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  DEFAULTVALUE="" EXPRESSION="PROPERTY_TYPE"      LENGTH="2"  NAME="o_PROPERTY_TYPE"      PORTTYPE="OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  DEFAULTVALUE="" EXPRESSION="PROPERTY_STATE"     LENGTH="2"  NAME="o_PROPERTY_STATE"     PORTTYPE="OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  DEFAULTVALUE="" EXPRESSION="DELINQUENCY_STATUS" LENGTH="2"  NAME="o_DELINQUENCY_STATUS" PORTTYPE="OUTPUT" PRECISION="2"  SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  DEFAULTVALUE="" EXPRESSION="SERVICER_ID"         LENGTH="12" NAME="o_SERVICER_ID"         PORTTYPE="OUTPUT" PRECISION="12" SCALE="0"/>
    <TRANSFORMFIELD DATATYPE="string"  DEFAULTVALUE="" EXPRESSION="ZERO_BALANCE_CODE"  LENGTH="2"  NAME="o_ZERO_BALANCE_CODE"  PORTTYPE="OUTPUT" PRECISION="2"  SCALE="0"/>
  </TRANSFORMATION>

  <!-- ═══════════════════════════════════════════════════════════
       CONNECTORS
  ═══════════════════════════════════════════════════════════ -->

  <!-- SQ_FNMA → UNI (FNMA_GROUP ports) -->
  <CONNECTOR FROMFIELD="LOAN_IDENTIFIER"   FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_LOAN_IDENTIFIER"   TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="REPORTING_PERIOD"  FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_REPORTING_PERIOD"  TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="ORIGINAL_UPB"      FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_ORIGINAL_UPB"      TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="CURRENT_UPB"        FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_CURRENT_UPB"        TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="NOTE_RATE"          FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_NOTE_RATE"          TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="ORIGINATION_DATE"  FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_ORIGINATION_DATE"  TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="ORIGINAL_TERM"      FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_ORIGINAL_TERM"      TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="ORIGINAL_LTV"       FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_ORIGINAL_LTV"       TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="LOAN_PURPOSE"       FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_LOAN_PURPOSE"       TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="PROPERTY_TYPE"      FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_PROPERTY_TYPE"      TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="PROPERTY_STATE"     FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_PROPERTY_STATE"     TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="DELINQUENCY_STATUS" FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_DELINQUENCY_STATUS" TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="SERVICER_ID"         FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_SERVICER_ID"         TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="ZERO_BALANCE_CODE"  FROMINSTANCE="SQ_FNMA_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FNMA_ZERO_BALANCE_CODE"  TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>

  <!-- SQ_FHLMC → UNI (FHLMC_GROUP ports) -->
  <CONNECTOR FROMFIELD="LOAN_IDENTIFIER"   FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_LOAN_IDENTIFIER"   TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="REPORTING_PERIOD"  FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_REPORTING_PERIOD"  TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="ORIGINAL_UPB"      FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_ORIGINAL_UPB"      TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="CURRENT_UPB"        FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_CURRENT_UPB"        TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="NOTE_RATE"          FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_NOTE_RATE"          TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="ORIGINATION_DATE"  FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_ORIGINATION_DATE"  TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="ORIGINAL_TERM"      FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_ORIGINAL_TERM"      TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="ORIGINAL_LTV"       FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_ORIGINAL_LTV"       TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="LOAN_PURPOSE"       FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_LOAN_PURPOSE"       TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="PROPERTY_TYPE"      FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_PROPERTY_TYPE"      TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="PROPERTY_STATE"     FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_PROPERTY_STATE"     TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="DELINQUENCY_STATUS" FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_DELINQUENCY_STATUS" TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="SERVICER_ID"         FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_SERVICER_ID"         TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>
  <CONNECTOR FROMFIELD="ZERO_BALANCE_CODE"  FROMINSTANCE="SQ_FHLMC_DELIVERY" FROMINSTANCETYPE="Source Qualifier" TOFIELD="FHLMC_ZERO_BALANCE_CODE"  TOINSTANCE="UNI_GSE_DELIVERY" TOINSTANCETYPE="Union"/>

  <!-- UNI → EXP -->
  <CONNECTOR FROMFIELD="SOURCE_TAG"         FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="SOURCE_TAG"         TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="LOAN_IDENTIFIER"   FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="LOAN_IDENTIFIER"   TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="REPORTING_PERIOD"  FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="REPORTING_PERIOD"  TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="ORIGINAL_UPB"      FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="ORIGINAL_UPB"      TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="CURRENT_UPB"        FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="CURRENT_UPB"        TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="NOTE_RATE"          FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="NOTE_RATE"          TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="ORIGINATION_DATE"  FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="ORIGINATION_DATE"  TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="ORIGINAL_TERM"      FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="ORIGINAL_TERM"      TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="ORIGINAL_LTV"       FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="ORIGINAL_LTV"       TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="LOAN_PURPOSE"       FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="LOAN_PURPOSE"       TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="PROPERTY_TYPE"      FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="PROPERTY_TYPE"      TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="PROPERTY_STATE"     FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="PROPERTY_STATE"     TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="DELINQUENCY_STATUS" FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="DELINQUENCY_STATUS" TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="SERVICER_ID"         FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="SERVICER_ID"         TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>
  <CONNECTOR FROMFIELD="ZERO_BALANCE_CODE"  FROMINSTANCE="UNI_GSE_DELIVERY" FROMINSTANCETYPE="Union" TOFIELD="ZERO_BALANCE_CODE"  TOINSTANCE="EXP_ADD_SOURCE" TOINSTANCETYPE="Expression"/>

  <!-- EXP → TGT -->
  <CONNECTOR FROMFIELD="GSE_SOURCE"          FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="GSE_SOURCE"         TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_LOAN_IDENTIFIER"   FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="LOAN_IDENTIFIER"   TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_REPORTING_PERIOD"  FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="REPORTING_PERIOD"  TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_ORIGINAL_UPB"      FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="ORIGINAL_UPB"      TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_CURRENT_UPB"        FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="CURRENT_UPB"        TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_NOTE_RATE"          FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="NOTE_RATE"          TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_ORIGINATION_DATE"  FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="ORIGINATION_DATE"  TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_ORIGINAL_TERM"      FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="ORIGINAL_TERM"      TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_ORIGINAL_LTV"       FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="ORIGINAL_LTV"       TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_LOAN_PURPOSE"       FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="LOAN_PURPOSE"       TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_PROPERTY_TYPE"      FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="PROPERTY_TYPE"      TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_PROPERTY_STATE"     FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="PROPERTY_STATE"     TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_DELINQUENCY_STATUS" FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="DELINQUENCY_STATUS" TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_SERVICER_ID"         FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="SERVICER_ID"         TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>
  <CONNECTOR FROMFIELD="o_ZERO_BALANCE_CODE"  FROMINSTANCE="EXP_ADD_SOURCE" FROMINSTANCETYPE="Expression" TOFIELD="ZERO_BALANCE_CODE"  TOINSTANCE="STG_GSE_DELIVERY" TOINSTANCETYPE="Target Definition"/>

  <!-- ── Instance placements ── -->
  <INSTANCE NAME="SQ_FNMA_DELIVERY"  REUSABLE="NO" TRANSFORMATION="SQ_FNMA_DELIVERY"  TYPE="Source Qualifier" X="80"  Y="120"/>
  <INSTANCE NAME="SQ_FHLMC_DELIVERY" REUSABLE="NO" TRANSFORMATION="SQ_FHLMC_DELIVERY" TYPE="Source Qualifier" X="80"  Y="300"/>
  <INSTANCE NAME="UNI_GSE_DELIVERY"  REUSABLE="NO" TRANSFORMATION="UNI_GSE_DELIVERY"  TYPE="Union"            X="340" Y="200"/>
  <INSTANCE NAME="EXP_ADD_SOURCE"    REUSABLE="NO" TRANSFORMATION="EXP_ADD_SOURCE"    TYPE="Expression"       X="580" Y="200"/>
  <INSTANCE NAME="STG_GSE_DELIVERY"  REUSABLE="NO" TRANSFORMATION="STG_GSE_DELIVERY"  TYPE="Target Definition" X="820" Y="200"/>

</MAPPING>
</FOLDER>
</REPOSITORY>
</POWERMART>
