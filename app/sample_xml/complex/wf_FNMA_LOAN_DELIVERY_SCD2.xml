<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE POWERMART SYSTEM "powrmart.dtd">
<!--
  Paired workflow for m_FNMA_LOAN_DELIVERY_SCD2.
  Upload together with params_FNMA_LOAN_DELIVERY_SCD2.txt
  to exercise v1.1 multi-file upload and Step 0 session extraction.
-->
<POWERMART CREATION_DATE="02/21/2026 10:00:00" REPOSITORY_VERSION="186.96">
  <REPOSITORY NAME="DEV_REPO" VERSION="186" CODEPAGE="UTF-8" DATABASETYPE="Oracle">
    <FOLDER NAME="MORTGAGE_ETL" GROUP="" OWNER="admin" SHARED="NOTSHARED"
            DESCRIPTION="ETL Workflows">

      <WORKFLOW DESCRIPTION="Workflow for m_FNMA_LOAN_DELIVERY_SCD2"
                NAME="WF_FNMA_LOAN_DELIVERY_SCD2"
                REUSABLE="NO"
                SCHEDULERNAME="Scheduler"
                SERVERNAME="DEV_IS"
                ISENABLED="YES">

        <TASK DESCRIPTION="" NAME="Start" REUSABLE="NO" TYPE="Start"/>

        <SESSION DESCRIPTION="Session for m_FNMA_LOAN_DELIVERY_SCD2"
                 NAME="s_FNMA_LOAN_DELIVERY_SCD2"
                 MAPPINGNAME="m_FNMA_LOAN_DELIVERY_SCD2"
                 REUSABLE="NO">

          <CONNECTIONREFERENCE
            CONNECTIONNAME="$$SRC_FNMA_CONNECTION"
            CONNECTIONSUBTYPE="Oracle"
            CONNECTIONTYPE="Relational"
            TRANSFORMATIONINSTANCENAME="SQ_FNMA_DELIVERY"
            ROLE="SOURCE"/>
          <CONNECTIONREFERENCE
            CONNECTIONNAME="$$SRC_CREDIT_CONNECTION"
            CONNECTIONSUBTYPE="Oracle"
            CONNECTIONTYPE="Relational"
            TRANSFORMATIONINSTANCENAME="SQ_CREDIT_SCORES"
            ROLE="SOURCE"/>
          <CONNECTIONREFERENCE
            CONNECTIONNAME="$$SRC_FNMA_CONNECTION"
            CONNECTIONSUBTYPE="Oracle"
            CONNECTIONTYPE="Relational"
            TRANSFORMATIONINSTANCENAME="SQ_DIM_LOAN_STATUS"
            ROLE="SOURCE"/>
          <CONNECTIONREFERENCE
            CONNECTIONNAME="$$DWH_CONNECTION"
            CONNECTIONSUBTYPE="Oracle"
            CONNECTIONTYPE="Relational"
            TRANSFORMATIONINSTANCENAME="FACT_LOAN_DELIVERY"
            ROLE="TARGET"/>
          <CONNECTIONREFERENCE
            CONNECTIONNAME="$$DWH_CONNECTION"
            CONNECTIONSUBTYPE="Oracle"
            CONNECTIONTYPE="Relational"
            TRANSFORMATIONINSTANCENAME="DIM_LOAN_STATUS_HIST"
            ROLE="TARGET"/>
          <CONNECTIONREFERENCE
            CONNECTIONNAME="$$DWH_CONNECTION"
            CONNECTIONSUBTYPE="Oracle"
            CONNECTIONTYPE="Relational"
            TRANSFORMATIONINSTANCENAME="AGG_PORTFOLIO_SUMMARY"
            ROLE="TARGET"/>

          <SESSTRANSFORMINSTATTR
            TRANSFORMATIONINSTANCENAME="s_FNMA_LOAN_DELIVERY_SCD2"
            ATTRIBUTENAME="Commit Interval"
            ATTRIBUTEVALUE="10000"/>

          <SESSTRANSFORMINSTATTR
            TRANSFORMATIONINSTANCENAME="s_FNMA_LOAN_DELIVERY_SCD2"
            ATTRIBUTENAME="Stop On Errors"
            ATTRIBUTEVALUE="0"/>

          <SESSTRANSFORMINSTATTR
            TRANSFORMATIONINSTANCENAME="FACT_LOAN_DELIVERY"
            ATTRIBUTENAME="Reject Filename"
            ATTRIBUTEVALUE="FNMA_LOAN_DELIVERY_SCD2.bad"/>

          <SESSTRANSFORMINSTATTR
            TRANSFORMATIONINSTANCENAME="FACT_LOAN_DELIVERY"
            ATTRIBUTENAME="Reject File Directory"
            ATTRIBUTEVALUE="$$REJECT_FILE_DIR"/>
          <SESSTRANSFORMINSTATTR
            TRANSFORMATIONINSTANCENAME="FACT_LOAN_DELIVERY"
            ATTRIBUTENAME="Pre SQL"
            ATTRIBUTEVALUE="UPDATE DWH.FACT_LOAN_DELIVERY SET IS_CURRENT='N', EFF_END_DATE=SYSDATE WHERE DELIVERY_MONTH='$$DELIVERY_MONTH' AND IS_CURRENT='Y'"/>
          <SESSTRANSFORMINSTATTR
            TRANSFORMATIONINSTANCENAME="FACT_LOAN_DELIVERY"
            ATTRIBUTENAME="Post SQL"
            ATTRIBUTEVALUE="UPDATE ETL_AUDIT SET STATUS='COMPLETE' WHERE JOB='WF_FNMA_LOAN_DELIVERY_SCD2'"/>

        </SESSION>

        <TASKINSTANCEPATH FROM="Start" TO="s_FNMA_LOAN_DELIVERY_SCD2"/>

      </WORKFLOW>

    </FOLDER>
  </REPOSITORY>
</POWERMART>
