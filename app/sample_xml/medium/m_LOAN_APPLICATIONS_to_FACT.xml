<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE POWERMART SYSTEM "powrmart.dtd">
<!--
  MAPPING : m_LOAN_APPLICATIONS_to_FACT
  TIER    : MEDIUM
  STACK   : dbt (SQL-friendly with Joiner, Lookup, Filter, Expression)
  DOMAIN  : Mortgage / Loan Origination
  CONTEXT : Joins two sources:
              1. STG_LOAN_APPLICATIONS — Oracle DB (loan officer submissions)
              2. PROPERTY_APPRAISALS.csv — daily flat file from CoreLogic appraisal vendor
            Enriches with a county-level conforming loan limit lookup.
            Derives LTV ratio, monthly payment (fixed-rate amortisation),
            loan type (conforming/high-balance/jumbo), and underwriting flag.
            Filters incomplete or invalid records before writing to the fact table.
-->
<POWERMART CREATION_DATE="02/01/2026 08:30:00" REPOSITORY_VERSION="186.96">
  <REPOSITORY NAME="MORTGAGE_REPO" VERSION="186" CODEPAGE="UTF-8" DATABASETYPE="Oracle">
    <FOLDER NAME="LOAN_ORIGINATION_ETL" GROUP="" OWNER="etl_admin" SHARED="NOTSHARED"
            DESCRIPTION="Loan origination pipeline — application to fact">

      <!-- ═══════════════════════════════════════════════════
           SOURCE 1: Loan Applications — Oracle DB
      ══════════════════════════════════════════════════════ -->
      <SOURCE BUSINESSNAME="Loan Applications Staging"
              DATABASETYPE="Oracle" DBDNAME="MORTGAGE_DB"
              DESCRIPTION="Loan applications entered by loan officers" NAME="STG_LOAN_APPLICATIONS" OWNERNAME="MORTGAGE_STG">
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="12"  NAME="APPLICATION_ID"    NULLABLE="NOTNULL" FIELDNUMBER="1"  FIELDTYPE="ELEMITEM" PRECISION="12" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="LOAN_OFFICER_ID"   NULLABLE="NULL"    FIELDNUMBER="2"  FIELDTYPE="ELEMITEM" PRECISION="20" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="64"  NAME="BORROWER_ID_HASH"  NULLABLE="NOTNULL" FIELDNUMBER="3"  FIELDTYPE="ELEMITEM" PRECISION="64" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="PROPERTY_ID"       NULLABLE="NOTNULL" FIELDNUMBER="4"  FIELDTYPE="ELEMITEM" PRECISION="20" SCALE="0"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="15"  NAME="LOAN_AMOUNT"       NULLABLE="NOTNULL" FIELDNUMBER="5"  FIELDTYPE="ELEMITEM" PRECISION="15" SCALE="2"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="6"   NAME="INTEREST_RATE"     NULLABLE="NULL"    FIELDNUMBER="6"  FIELDTYPE="ELEMITEM" PRECISION="6"  SCALE="4"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="3"   NAME="LOAN_TERM_MONTHS"  NULLABLE="NULL"    FIELDNUMBER="7"  FIELDTYPE="ELEMITEM" PRECISION="3"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="LOAN_PURPOSE"      NULLABLE="NULL"    FIELDNUMBER="8"  FIELDTYPE="ELEMITEM" PRECISION="10" SCALE="0"/>
        <SOURCEFIELD DATATYPE="DATE"     LENGTH="29"  NAME="APPLICATION_DATE"  NULLABLE="NULL"    FIELDNUMBER="9"  FIELDTYPE="ELEMITEM" PRECISION="29" SCALE="9"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="COUNTY_CODE"       NULLABLE="NULL"    FIELDNUMBER="10" FIELDTYPE="ELEMITEM" PRECISION="20" SCALE="0"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="3"   NAME="CREDIT_SCORE"      NULLABLE="NULL"    FIELDNUMBER="11" FIELDTYPE="ELEMITEM" PRECISION="3"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="6"   NAME="DTI_RATIO"         NULLABLE="NULL"    FIELDNUMBER="12" FIELDTYPE="ELEMITEM" PRECISION="6"  SCALE="4"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="OCCUPANCY_TYPE"    NULLABLE="NULL"    FIELDNUMBER="13" FIELDTYPE="ELEMITEM" PRECISION="10" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="2"   NAME="APPLICATION_STATE" NULLABLE="NULL"    FIELDNUMBER="14" FIELDTYPE="ELEMITEM" PRECISION="2"  SCALE="0"/>
      </SOURCE>

      <!-- ═══════════════════════════════════════════════════
           SOURCE 2: CoreLogic Appraisal File — FLAT FILE
           Format: pipe-delimited, daily vendor drop
      ══════════════════════════════════════════════════════ -->
      <SOURCE BUSINESSNAME="CoreLogic Appraisal Feed"
              DATABASETYPE="FLAT FILE"
              DESCRIPTION="Daily property appraisal values from CoreLogic vendor"
              NAME="PROPERTY_APPRAISALS" OWNERNAME="">
        <SOURCEFIELD DATATYPE="string"  LENGTH="20"  NAME="PROPERTY_ID"       NULLABLE="NOTNULL" FIELDNUMBER="1" FIELDTYPE="ELEMITEM" PRECISION="20"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="decimal" LENGTH="15"  NAME="APPRAISED_VALUE"   NULLABLE="NULL"    FIELDNUMBER="2" FIELDTYPE="ELEMITEM" PRECISION="15"  SCALE="2"/>
        <SOURCEFIELD DATATYPE="string"  LENGTH="20"  NAME="APPRAISER_LICENSE" NULLABLE="NULL"    FIELDNUMBER="3" FIELDTYPE="ELEMITEM" PRECISION="20"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="date"    LENGTH="29"  NAME="APPRAISAL_DATE"    NULLABLE="NULL"    FIELDNUMBER="4" FIELDTYPE="ELEMITEM" PRECISION="29"  SCALE="9"/>
        <SOURCEFIELD DATATYPE="string"  LENGTH="10"  NAME="APPRAISAL_METHOD"  NULLABLE="NULL"    FIELDNUMBER="5" FIELDTYPE="ELEMITEM" PRECISION="10"  SCALE="0"/>
        <SOURCEFIELD DATATYPE="decimal" LENGTH="6"   NAME="CONDITION_SCORE"   NULLABLE="NULL"    FIELDNUMBER="6" FIELDTYPE="ELEMITEM" PRECISION="6"   SCALE="2"/>
        <!-- File attributes: pipe-delimited, no text qualifier -->
        <TABLEATTRIBUTE NAME="Delimited"    VALUE="YES"/>
        <TABLEATTRIBUTE NAME="Delimiter"    VALUE="|"/>
        <TABLEATTRIBUTE NAME="HeaderExists" VALUE="YES"/>
        <TABLEATTRIBUTE NAME="RowsToSkip"   VALUE="1"/>
      </SOURCE>

      <!-- ═══════════════════════════════════════════════════
           LOOKUP SOURCE: County Conforming Loan Limits
      ══════════════════════════════════════════════════════ -->
      <SOURCE BUSINESSNAME="FHFA County Loan Limits"
              DATABASETYPE="Oracle" DBDNAME="MORTGAGE_DB"
              DESCRIPTION="FHFA county-level conforming loan limits (updated annually)"
              NAME="REF_COUNTY_LOAN_LIMITS" OWNERNAME="MORTGAGE_REF">
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="COUNTY_CODE"          NULLABLE="NOTNULL" FIELDNUMBER="1" FIELDTYPE="ELEMITEM" PRECISION="20" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="100" NAME="COUNTY_NAME"          NULLABLE="NULL"    FIELDNUMBER="2" FIELDTYPE="ELEMITEM" PRECISION="100" SCALE="0"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="15"  NAME="CONFORMING_LIMIT_1U"  NULLABLE="NULL"    FIELDNUMBER="3" FIELDTYPE="ELEMITEM" PRECISION="15" SCALE="0"/>
        <SOURCEFIELD DATATYPE="NUMBER"   LENGTH="15"  NAME="HIGH_BALANCE_LIMIT_1U" NULLABLE="NULL"   FIELDNUMBER="4" FIELDTYPE="ELEMITEM" PRECISION="15" SCALE="0"/>
        <SOURCEFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="MSA_CODE"             NULLABLE="NULL"    FIELDNUMBER="5" FIELDTYPE="ELEMITEM" PRECISION="20" SCALE="0"/>
      </SOURCE>

      <!-- ═══════════════════════════════════════════════════
           TARGET: Fact Loan Applications — Snowflake
      ══════════════════════════════════════════════════════ -->
      <TARGET BUSINESSNAME="Fact Loan Applications"
              DATABASETYPE="Snowflake"
              DESCRIPTION="Fact table for mortgage loan application analytics"
              NAME="FACT_LOAN_APPLICATIONS" OWNERNAME="MORTGAGE_MART">
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="12"  NAME="APPLICATION_KEY"    KEYTYPE="PRIMARY KEY" FIELDNUMBER="1"  PRECISION="12" SCALE="0" NULLABLE="NOTNULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="12"  NAME="APPLICATION_ID"     KEYTYPE="NOT A KEY"   FIELDNUMBER="2"  PRECISION="12" SCALE="0" NULLABLE="NOTNULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="LOAN_OFFICER_ID"    KEYTYPE="NOT A KEY"   FIELDNUMBER="3"  PRECISION="20" SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="64"  NAME="BORROWER_ID_HASH"   KEYTYPE="NOT A KEY"   FIELDNUMBER="4"  PRECISION="64" SCALE="0" NULLABLE="NOTNULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="PROPERTY_ID"        KEYTYPE="NOT A KEY"   FIELDNUMBER="5"  PRECISION="20" SCALE="0" NULLABLE="NOTNULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="15"  NAME="LOAN_AMOUNT"        KEYTYPE="NOT A KEY"   FIELDNUMBER="6"  PRECISION="15" SCALE="2" NULLABLE="NOTNULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="15"  NAME="APPRAISED_VALUE"    KEYTYPE="NOT A KEY"   FIELDNUMBER="7"  PRECISION="15" SCALE="2" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="7"   NAME="LTV_RATIO"          KEYTYPE="NOT A KEY"   FIELDNUMBER="8"  PRECISION="7"  SCALE="4" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="10"  NAME="MONTHLY_PAYMENT"    KEYTYPE="NOT A KEY"   FIELDNUMBER="9"  PRECISION="10" SCALE="2" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="6"   NAME="INTEREST_RATE"      KEYTYPE="NOT A KEY"   FIELDNUMBER="10" PRECISION="6"  SCALE="4" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="3"   NAME="LOAN_TERM_MONTHS"   KEYTYPE="NOT A KEY"   FIELDNUMBER="11" PRECISION="3"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="LOAN_TYPE"          KEYTYPE="NOT A KEY"   FIELDNUMBER="12" PRECISION="20" SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="10"  NAME="LOAN_PURPOSE"       KEYTYPE="NOT A KEY"   FIELDNUMBER="13" PRECISION="10" SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="3"   NAME="CREDIT_SCORE"       KEYTYPE="NOT A KEY"   FIELDNUMBER="14" PRECISION="3"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="NUMBER"   LENGTH="6"   NAME="DTI_RATIO"          KEYTYPE="NOT A KEY"   FIELDNUMBER="15" PRECISION="6"  SCALE="4" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="1"   NAME="ELIGIBLE_FOR_FNMA"  KEYTYPE="NOT A KEY"   FIELDNUMBER="16" PRECISION="1"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="UNDERWRITING_FLAG"  KEYTYPE="NOT A KEY"   FIELDNUMBER="17" PRECISION="20" SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="COUNTY_CODE"        KEYTYPE="NOT A KEY"   FIELDNUMBER="18" PRECISION="20" SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="20"  NAME="MSA_CODE"           KEYTYPE="NOT A KEY"   FIELDNUMBER="19" PRECISION="20" SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="DATE"     LENGTH="29"  NAME="APPLICATION_DATE"   KEYTYPE="NOT A KEY"   FIELDNUMBER="20" PRECISION="29" SCALE="9" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="VARCHAR2" LENGTH="7"   NAME="APPLICATION_MONTH"  KEYTYPE="NOT A KEY"   FIELDNUMBER="21" PRECISION="7"  SCALE="0" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="DATE"     LENGTH="29"  NAME="APPRAISAL_DATE"     KEYTYPE="NOT A KEY"   FIELDNUMBER="22" PRECISION="29" SCALE="9" NULLABLE="NULL"/>
        <TARGETFIELD DATATYPE="DATE"     LENGTH="29"  NAME="ETL_LOAD_DATE"      KEYTYPE="NOT A KEY"   FIELDNUMBER="23" PRECISION="29" SCALE="9" NULLABLE="NULL"/>
      </TARGET>

      <!-- ═══════════════════════════════════════════════════
           MAPPING
      ══════════════════════════════════════════════════════ -->
      <MAPPING DESCRIPTION="Join loan applications (Oracle DB) with CoreLogic appraisal flat file on PROPERTY_ID. Lookup FHFA county conforming limits. Derive LTV, monthly payment, FNMA loan type, and underwriting eligibility flag. Filter applications missing appraisal or with loan amount = 0."
               ISVALID="YES" NAME="m_LOAN_APPLICATIONS_to_FACT"
               OBJECTVERSION="1" VERSIONNUMBER="1">

        <!-- SQ 1 — Loan Applications (DB) -->
        <TRANSFORMATION NAME="SQ_LOAN_APPLICATIONS" TYPE="Source Qualifier"
                        REUSABLE="NO" OBJECTVERSION="1" VERSIONNUMBER="1"
                        DESCRIPTION="Read pending loan applications submitted since last run">
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPLICATION_ID"    PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="12" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_OFFICER_ID"   PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BORROWER_ID_HASH"  PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="64" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="PROPERTY_ID"       PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_AMOUNT"       PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="INTEREST_RATE"     PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_TERM_MONTHS"  PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_PURPOSE"      PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="10" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPLICATION_DATE"  PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="29" SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="COUNTY_CODE"       PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="CREDIT_SCORE"      PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="DTI_RATIO"         PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="OCCUPANCY_TYPE"    PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="10" SCALE="0"/>
          <TABLEATTRIBUTE NAME="Sql Query"     VALUE=""/>
          <TABLEATTRIBUTE NAME="Source Filter" VALUE="LOAN_AMOUNT &gt; 0 AND APPLICATION_DATE &gt;= TRUNC(SYSDATE-1)"/>
        </TRANSFORMATION>

        <!-- SQ 2 — CoreLogic Appraisals (flat file) -->
        <TRANSFORMATION NAME="SQ_PROPERTY_APPRAISALS" TYPE="Source Qualifier"
                        REUSABLE="NO" OBJECTVERSION="1" VERSIONNUMBER="1"
                        DESCRIPTION="Read today's CoreLogic appraisal file. One row per property.">
          <TRANSFORMFIELD DATATYPE="string"  NAME="PROPERTY_ID"       PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="decimal" NAME="APPRAISED_VALUE"   PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="string"  NAME="APPRAISER_LICENSE" PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="date"    NAME="APPRAISAL_DATE"    PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="29" SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="string"  NAME="APPRAISAL_METHOD"  PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="10" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="decimal" NAME="CONDITION_SCORE"   PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="6"  SCALE="2"/>
          <TABLEATTRIBUTE NAME="Source Filter" VALUE="APPRAISED_VALUE IS NOT NULL AND APPRAISED_VALUE &gt; 0"/>
        </TRANSFORMATION>

        <!-- Joiner — join applications to appraisals on PROPERTY_ID -->
        <TRANSFORMATION NAME="JNR_APPL_APPRAISAL" TYPE="Joiner"
                        REUSABLE="NO" OBJECTVERSION="1" VERSIONNUMBER="1"
                        DESCRIPTION="Inner join loan applications (master) with CoreLogic appraisals (detail) on PROPERTY_ID. Applications without a matching appraisal are dropped — appraisal is mandatory for FNMA eligibility determination.">
          <!-- Master (loan applications) -->
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPLICATION_ID"    PORTTYPE="INPUT"  EXPRESSION="" PRECISION="12" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_OFFICER_ID"   PORTTYPE="INPUT"  EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BORROWER_ID_HASH"  PORTTYPE="INPUT"  EXPRESSION="" PRECISION="64" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="PROPERTY_ID_M"     PORTTYPE="INPUT"  EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_AMOUNT"       PORTTYPE="INPUT"  EXPRESSION="" PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="INTEREST_RATE"     PORTTYPE="INPUT"  EXPRESSION="" PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_TERM_MONTHS"  PORTTYPE="INPUT"  EXPRESSION="" PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_PURPOSE"      PORTTYPE="INPUT"  EXPRESSION="" PRECISION="10" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPLICATION_DATE"  PORTTYPE="INPUT"  EXPRESSION="" PRECISION="29" SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="COUNTY_CODE"       PORTTYPE="INPUT"  EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="CREDIT_SCORE"      PORTTYPE="INPUT"  EXPRESSION="" PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="DTI_RATIO"         PORTTYPE="INPUT"  EXPRESSION="" PRECISION="6"  SCALE="4"/>
          <!-- Detail (appraisals) -->
          <TRANSFORMFIELD DATATYPE="string"   NAME="PROPERTY_ID_D"     PORTTYPE="INPUT"  EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="decimal"  NAME="APPRAISED_VALUE"   PORTTYPE="INPUT"  EXPRESSION="" PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="date"     NAME="APPRAISAL_DATE"    PORTTYPE="INPUT"  EXPRESSION="" PRECISION="29" SCALE="9"/>
          <!-- Output ports -->
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="OUT_APPLICATION_ID"   PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="12" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="OUT_LOAN_OFFICER_ID"  PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="OUT_BORROWER_ID_HASH" PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="64" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="OUT_PROPERTY_ID"      PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="OUT_LOAN_AMOUNT"      PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="OUT_INTEREST_RATE"    PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="OUT_LOAN_TERM_MONTHS" PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="OUT_LOAN_PURPOSE"     PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="10" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="OUT_APPLICATION_DATE" PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="29" SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="OUT_COUNTY_CODE"      PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="OUT_CREDIT_SCORE"     PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="OUT_DTI_RATIO"        PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="OUT_APPRAISED_VALUE"  PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="date"     NAME="OUT_APPRAISAL_DATE"   PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="29" SCALE="9"/>
          <TABLEATTRIBUTE NAME="Join Type"      VALUE="Inner Join"/>
          <TABLEATTRIBUTE NAME="Join Condition" VALUE="PROPERTY_ID_M = PROPERTY_ID_D"/>
          <TABLEATTRIBUTE NAME="Master Source"  VALUE="SQ_LOAN_APPLICATIONS"/>
        </TRANSFORMATION>

        <!-- Lookup — FHFA county conforming loan limits -->
        <TRANSFORMATION NAME="LKP_COUNTY_LOAN_LIMITS" TYPE="Lookup"
                        REUSABLE="NO" OBJECTVERSION="1" VERSIONNUMBER="1"
                        DESCRIPTION="Lookup FHFA conforming and high-balance loan limits for the property county. Used to classify loan as conforming / high-balance / jumbo.">
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="IN_COUNTY_CODE"            PORTTYPE="INPUT"  EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="COUNTY_CODE"               PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="COUNTY_NAME"               PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="100" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="CONFORMING_LIMIT_1U"       PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="15" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="HIGH_BALANCE_LIMIT_1U"     PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="15" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="MSA_CODE"                  PORTTYPE="OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TABLEATTRIBUTE NAME="Lookup table name"       VALUE="REF_COUNTY_LOAN_LIMITS"/>
          <TABLEATTRIBUTE NAME="Lookup condition"        VALUE="COUNTY_CODE = IN_COUNTY_CODE"/>
          <TABLEATTRIBUTE NAME="Lookup policy on multiple match" VALUE="Use first value"/>
          <TABLEATTRIBUTE NAME="Lookup cache"            VALUE="Dynamic"/>
        </TRANSFORMATION>

        <!-- Expression — derive key measures and flags -->
        <TRANSFORMATION NAME="EXP_DERIVE_METRICS" TYPE="Expression"
                        REUSABLE="NO" OBJECTVERSION="1" VERSIONNUMBER="1"
                        DESCRIPTION="Derive LTV ratio, monthly payment (standard fixed-rate amortisation formula), loan type classification against FHFA county limits, FNMA eligibility flag, and underwriting decision band.">
          <!-- Pass-throughs -->
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPLICATION_ID"    PORTTYPE="INPUT/OUTPUT" EXPRESSION="APPLICATION_ID"    PRECISION="12" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_OFFICER_ID"   PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_OFFICER_ID"   PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BORROWER_ID_HASH"  PORTTYPE="INPUT/OUTPUT" EXPRESSION="BORROWER_ID_HASH"  PRECISION="64" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="PROPERTY_ID"       PORTTYPE="INPUT/OUTPUT" EXPRESSION="PROPERTY_ID"       PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_AMOUNT"       PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_AMOUNT"       PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPRAISED_VALUE"   PORTTYPE="INPUT/OUTPUT" EXPRESSION="APPRAISED_VALUE"   PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="INTEREST_RATE"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="INTEREST_RATE"     PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_TERM_MONTHS"  PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_TERM_MONTHS"  PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_PURPOSE"      PORTTYPE="INPUT/OUTPUT" EXPRESSION="LOAN_PURPOSE"      PRECISION="10" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPLICATION_DATE"  PORTTYPE="INPUT/OUTPUT" EXPRESSION="APPLICATION_DATE"  PRECISION="29" SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="COUNTY_CODE"       PORTTYPE="INPUT/OUTPUT" EXPRESSION="COUNTY_CODE"       PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="CREDIT_SCORE"      PORTTYPE="INPUT/OUTPUT" EXPRESSION="CREDIT_SCORE"      PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="DTI_RATIO"         PORTTYPE="INPUT/OUTPUT" EXPRESSION="DTI_RATIO"         PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="MSA_CODE"          PORTTYPE="INPUT/OUTPUT" EXPRESSION="MSA_CODE"          PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPRAISAL_DATE"    PORTTYPE="INPUT/OUTPUT" EXPRESSION="APPRAISAL_DATE"    PRECISION="29" SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="CONFORMING_LIMIT"  PORTTYPE="INPUT/OUTPUT" EXPRESSION="CONFORMING_LIMIT_1U"  PRECISION="15" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="HIGH_BAL_LIMIT"    PORTTYPE="INPUT/OUTPUT" EXPRESSION="HIGH_BALANCE_LIMIT_1U" PRECISION="15" SCALE="0"/>
          <!-- Derived: LTV = loan / appraised -->
          <TRANSFORMFIELD DATATYPE="NUMBER" NAME="LTV_RATIO"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="IIF(APPRAISED_VALUE &gt; 0, ROUND(LOAN_AMOUNT / APPRAISED_VALUE, 4), NULL)"
                          PRECISION="7" SCALE="4"/>
          <!-- Derived: monthly payment — fixed-rate amortisation: P*r*(1+r)^n / ((1+r)^n - 1) -->
          <TRANSFORMFIELD DATATYPE="NUMBER" NAME="MONTHLY_PAYMENT"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="IIF(INTEREST_RATE &gt; 0 AND LOAN_TERM_MONTHS &gt; 0,
                                          ROUND(LOAN_AMOUNT * (INTEREST_RATE/12) * POWER(1 + INTEREST_RATE/12, LOAN_TERM_MONTHS) /
                                                (POWER(1 + INTEREST_RATE/12, LOAN_TERM_MONTHS) - 1), 2),
                                          IIF(LOAN_TERM_MONTHS &gt; 0, ROUND(LOAN_AMOUNT / LOAN_TERM_MONTHS, 2), NULL))"
                          PRECISION="10" SCALE="2"/>
          <!-- Derived: FNMA loan type classification -->
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_TYPE"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="IIF(LOAN_AMOUNT &lt;= CONFORMING_LIMIT, 'CONFORMING',
                                      IIF(LOAN_AMOUNT &lt;= HIGH_BAL_LIMIT,  'HIGH_BALANCE', 'JUMBO'))"
                          PRECISION="20" SCALE="0"/>
          <!-- Derived: FNMA purchase eligibility (conforming + credit + DTI rules) -->
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="ELIGIBLE_FOR_FNMA"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="IIF(LOAN_AMOUNT &lt;= HIGH_BAL_LIMIT
                                          AND CREDIT_SCORE &gt;= 620
                                          AND DTI_RATIO &lt;= 0.45
                                          AND LTV_RATIO &lt;= 0.97, 'Y', 'N')"
                          PRECISION="1" SCALE="0"/>
          <!-- Derived: underwriting decision band -->
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="UNDERWRITING_FLAG"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="IIF(CREDIT_SCORE &lt; 580 OR DTI_RATIO &gt; 0.55 OR LTV_RATIO &gt; 1.0, 'DECLINE_RISK',
                                      IIF(CREDIT_SCORE &lt; 640 OR DTI_RATIO &gt; 0.45, 'MANUAL_REVIEW',
                                      IIF(CREDIT_SCORE &lt; 700 OR DTI_RATIO &gt; 0.36, 'APPROVE_WITH_CONDITIONS',
                                      'AUTO_APPROVE')))"
                          PRECISION="30" SCALE="0"/>
          <!-- Derived: year-month for partitioning -->
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="APPLICATION_MONTH"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="TO_CHAR(APPLICATION_DATE, 'YYYY-MM')"
                          PRECISION="7" SCALE="0"/>
          <!-- Derived: surrogate key (sequence-based in target, mimic with APPLICATION_ID for now) -->
          <TRANSFORMFIELD DATATYPE="NUMBER" NAME="APPLICATION_KEY"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="APPLICATION_ID"
                          PRECISION="12" SCALE="0"/>
          <!-- ETL audit -->
          <TRANSFORMFIELD DATATYPE="DATE" NAME="ETL_LOAD_DATE"
                          PORTTYPE="OUTPUT"
                          EXPRESSION="SYSDATE"
                          PRECISION="29" SCALE="9"/>
        </TRANSFORMATION>

        <!-- Filter — reject records that cannot be processed -->
        <TRANSFORMATION NAME="FIL_VALID_APPLICATIONS" TYPE="Filter"
                        REUSABLE="NO" OBJECTVERSION="1" VERSIONNUMBER="1"
                        DESCRIPTION="Reject any records where LTV cannot be computed (null appraised value) or where the loan amount is missing. These cannot be submitted to FNMA.">
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPLICATION_KEY"   PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="12" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPLICATION_ID"    PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="12" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_OFFICER_ID"   PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BORROWER_ID_HASH"  PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="64" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="PROPERTY_ID"       PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_AMOUNT"       PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPRAISED_VALUE"   PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LTV_RATIO"         PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="7"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="MONTHLY_PAYMENT"   PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="10" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="INTEREST_RATE"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_TERM_MONTHS"  PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_TYPE"         PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_PURPOSE"      PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="10" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="CREDIT_SCORE"      PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="DTI_RATIO"         PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="ELIGIBLE_FOR_FNMA" PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="1"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="UNDERWRITING_FLAG" PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="30" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="COUNTY_CODE"       PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="MSA_CODE"          PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPLICATION_DATE"  PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="29" SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="APPLICATION_MONTH" PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="7"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPRAISAL_DATE"    PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="29" SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="ETL_LOAD_DATE"     PORTTYPE="INPUT/OUTPUT" EXPRESSION="" PRECISION="29" SCALE="9"/>
          <TABLEATTRIBUTE NAME="Filter Condition" VALUE="NOT ISNULL(LTV_RATIO) AND LOAN_AMOUNT &gt; 0 AND NOT ISNULL(APPRAISED_VALUE)"/>
        </TRANSFORMATION>

        <!-- Target -->
        <TRANSFORMATION NAME="TGT_FACT_LOAN_APPLICATIONS" TYPE="Target Definition"
                        REUSABLE="NO" OBJECTVERSION="1" VERSIONNUMBER="1">
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPLICATION_KEY"   PORTTYPE="INPUT" PRECISION="12" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPLICATION_ID"    PORTTYPE="INPUT" PRECISION="12" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_OFFICER_ID"   PORTTYPE="INPUT" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="BORROWER_ID_HASH"  PORTTYPE="INPUT" PRECISION="64" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="PROPERTY_ID"       PORTTYPE="INPUT" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_AMOUNT"       PORTTYPE="INPUT" PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="APPRAISED_VALUE"   PORTTYPE="INPUT" PRECISION="15" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LTV_RATIO"         PORTTYPE="INPUT" PRECISION="7"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="MONTHLY_PAYMENT"   PORTTYPE="INPUT" PRECISION="10" SCALE="2"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="INTEREST_RATE"     PORTTYPE="INPUT" PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="LOAN_TERM_MONTHS"  PORTTYPE="INPUT" PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_TYPE"         PORTTYPE="INPUT" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="LOAN_PURPOSE"      PORTTYPE="INPUT" PRECISION="10" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="CREDIT_SCORE"      PORTTYPE="INPUT" PRECISION="3"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="NUMBER"   NAME="DTI_RATIO"         PORTTYPE="INPUT" PRECISION="6"  SCALE="4"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="ELIGIBLE_FOR_FNMA" PORTTYPE="INPUT" PRECISION="1"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="UNDERWRITING_FLAG" PORTTYPE="INPUT" PRECISION="30" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="COUNTY_CODE"       PORTTYPE="INPUT" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="MSA_CODE"          PORTTYPE="INPUT" PRECISION="20" SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPLICATION_DATE"  PORTTYPE="INPUT" PRECISION="29" SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="VARCHAR2" NAME="APPLICATION_MONTH" PORTTYPE="INPUT" PRECISION="7"  SCALE="0"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="APPRAISAL_DATE"    PORTTYPE="INPUT" PRECISION="29" SCALE="9"/>
          <TRANSFORMFIELD DATATYPE="DATE"     NAME="ETL_LOAD_DATE"     PORTTYPE="INPUT" PRECISION="29" SCALE="9"/>
        </TRANSFORMATION>

        <!-- ═══ CONNECTORS ═══ -->
        <!-- SQ1 → Joiner (master) -->
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="APPLICATION_ID"   TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="APPLICATION_ID"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="LOAN_OFFICER_ID"  TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="LOAN_OFFICER_ID"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="BORROWER_ID_HASH" TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="BORROWER_ID_HASH"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="PROPERTY_ID"      TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="PROPERTY_ID_M"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="LOAN_AMOUNT"      TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="LOAN_AMOUNT"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="INTEREST_RATE"    TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="INTEREST_RATE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="LOAN_TERM_MONTHS" TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="LOAN_TERM_MONTHS"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="LOAN_PURPOSE"     TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="LOAN_PURPOSE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="APPLICATION_DATE" TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="APPLICATION_DATE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="COUNTY_CODE"      TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="COUNTY_CODE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="CREDIT_SCORE"     TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="CREDIT_SCORE"/>
        <CONNECTOR FROMINSTANCE="SQ_LOAN_APPLICATIONS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="DTI_RATIO"        TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="DTI_RATIO"/>
        <!-- SQ2 → Joiner (detail) -->
        <CONNECTOR FROMINSTANCE="SQ_PROPERTY_APPRAISALS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="PROPERTY_ID"      TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="PROPERTY_ID_D"/>
        <CONNECTOR FROMINSTANCE="SQ_PROPERTY_APPRAISALS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="APPRAISED_VALUE"  TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="APPRAISED_VALUE"/>
        <CONNECTOR FROMINSTANCE="SQ_PROPERTY_APPRAISALS" FROMINSTANCETYPE="Source Qualifier" FROMFIELD="APPRAISAL_DATE"   TOINSTANCE="JNR_APPL_APPRAISAL" TOINSTANCETYPE="Joiner" TOFIELD="APPRAISAL_DATE"/>
        <!-- Joiner → Lookup -->
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_COUNTY_CODE" TOINSTANCE="LKP_COUNTY_LOAN_LIMITS" TOINSTANCETYPE="Lookup" TOFIELD="IN_COUNTY_CODE"/>
        <!-- Joiner → EXP -->
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_APPLICATION_ID"   TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="APPLICATION_ID"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_LOAN_OFFICER_ID"  TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="LOAN_OFFICER_ID"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_BORROWER_ID_HASH" TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="BORROWER_ID_HASH"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_PROPERTY_ID"      TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="PROPERTY_ID"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_LOAN_AMOUNT"      TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="LOAN_AMOUNT"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_INTEREST_RATE"    TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="INTEREST_RATE"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_LOAN_TERM_MONTHS" TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="LOAN_TERM_MONTHS"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_LOAN_PURPOSE"     TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="LOAN_PURPOSE"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_APPLICATION_DATE" TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="APPLICATION_DATE"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_COUNTY_CODE"      TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="COUNTY_CODE"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_CREDIT_SCORE"     TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="CREDIT_SCORE"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_DTI_RATIO"        TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="DTI_RATIO"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_APPRAISED_VALUE"  TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="APPRAISED_VALUE"/>
        <CONNECTOR FROMINSTANCE="JNR_APPL_APPRAISAL" FROMINSTANCETYPE="Joiner" FROMFIELD="OUT_APPRAISAL_DATE"   TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="APPRAISAL_DATE"/>
        <!-- Lookup → EXP -->
        <CONNECTOR FROMINSTANCE="LKP_COUNTY_LOAN_LIMITS" FROMINSTANCETYPE="Lookup" FROMFIELD="CONFORMING_LIMIT_1U"   TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="CONFORMING_LIMIT"/>
        <CONNECTOR FROMINSTANCE="LKP_COUNTY_LOAN_LIMITS" FROMINSTANCETYPE="Lookup" FROMFIELD="HIGH_BALANCE_LIMIT_1U" TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="HIGH_BAL_LIMIT"/>
        <CONNECTOR FROMINSTANCE="LKP_COUNTY_LOAN_LIMITS" FROMINSTANCETYPE="Lookup" FROMFIELD="MSA_CODE"              TOINSTANCE="EXP_DERIVE_METRICS" TOINSTANCETYPE="Expression" TOFIELD="MSA_CODE"/>
        <!-- EXP → Filter -->
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="APPLICATION_KEY"   TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="APPLICATION_KEY"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="APPLICATION_ID"    TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="APPLICATION_ID"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_OFFICER_ID"   TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_OFFICER_ID"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="BORROWER_ID_HASH"  TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="BORROWER_ID_HASH"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="PROPERTY_ID"       TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="PROPERTY_ID"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_AMOUNT"       TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_AMOUNT"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="APPRAISED_VALUE"   TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="APPRAISED_VALUE"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="LTV_RATIO"         TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LTV_RATIO"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="MONTHLY_PAYMENT"   TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="MONTHLY_PAYMENT"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="INTEREST_RATE"     TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="INTEREST_RATE"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_TERM_MONTHS"  TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_TERM_MONTHS"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_TYPE"         TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_TYPE"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="LOAN_PURPOSE"      TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="LOAN_PURPOSE"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="CREDIT_SCORE"      TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="CREDIT_SCORE"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="DTI_RATIO"         TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="DTI_RATIO"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="ELIGIBLE_FOR_FNMA" TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="ELIGIBLE_FOR_FNMA"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="UNDERWRITING_FLAG" TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="UNDERWRITING_FLAG"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="COUNTY_CODE"       TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="COUNTY_CODE"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="MSA_CODE"          TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="MSA_CODE"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="APPLICATION_DATE"  TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="APPLICATION_DATE"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="APPLICATION_MONTH" TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="APPLICATION_MONTH"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="APPRAISAL_DATE"    TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="APPRAISAL_DATE"/>
        <CONNECTOR FROMINSTANCE="EXP_DERIVE_METRICS" FROMINSTANCETYPE="Expression" FROMFIELD="ETL_LOAD_DATE"     TOINSTANCE="FIL_VALID_APPLICATIONS" TOINSTANCETYPE="Filter" TOFIELD="ETL_LOAD_DATE"/>
        <!-- Filter → Target -->
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="APPLICATION_KEY"   TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="APPLICATION_KEY"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="APPLICATION_ID"    TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="APPLICATION_ID"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_OFFICER_ID"   TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_OFFICER_ID"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="BORROWER_ID_HASH"  TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="BORROWER_ID_HASH"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="PROPERTY_ID"       TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="PROPERTY_ID"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_AMOUNT"       TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_AMOUNT"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="APPRAISED_VALUE"   TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="APPRAISED_VALUE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LTV_RATIO"         TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LTV_RATIO"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="MONTHLY_PAYMENT"   TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="MONTHLY_PAYMENT"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="INTEREST_RATE"     TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="INTEREST_RATE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_TERM_MONTHS"  TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_TERM_MONTHS"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_TYPE"         TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_TYPE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="LOAN_PURPOSE"      TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="LOAN_PURPOSE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="CREDIT_SCORE"      TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="CREDIT_SCORE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="DTI_RATIO"         TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="DTI_RATIO"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="ELIGIBLE_FOR_FNMA" TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="ELIGIBLE_FOR_FNMA"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="UNDERWRITING_FLAG" TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="UNDERWRITING_FLAG"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="COUNTY_CODE"       TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="COUNTY_CODE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="MSA_CODE"          TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="MSA_CODE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="APPLICATION_DATE"  TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="APPLICATION_DATE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="APPLICATION_MONTH" TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="APPLICATION_MONTH"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="APPRAISAL_DATE"    TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="APPRAISAL_DATE"/>
        <CONNECTOR FROMINSTANCE="FIL_VALID_APPLICATIONS" FROMINSTANCETYPE="Filter" FROMFIELD="ETL_LOAD_DATE"     TOINSTANCE="TGT_FACT_LOAN_APPLICATIONS" TOINSTANCETYPE="Target Definition" TOFIELD="ETL_LOAD_DATE"/>

        <INSTANCE NAME="SQ_LOAN_APPLICATIONS"      TRANSFORMATION_NAME="SQ_LOAN_APPLICATIONS"      TYPE="Source Qualifier" REUSABLE="NO"/>
        <INSTANCE NAME="SQ_PROPERTY_APPRAISALS"    TRANSFORMATION_NAME="SQ_PROPERTY_APPRAISALS"    TYPE="Source Qualifier" REUSABLE="NO"/>
        <INSTANCE NAME="JNR_APPL_APPRAISAL"        TRANSFORMATION_NAME="JNR_APPL_APPRAISAL"        TYPE="Joiner"           REUSABLE="NO"/>
        <INSTANCE NAME="LKP_COUNTY_LOAN_LIMITS"    TRANSFORMATION_NAME="LKP_COUNTY_LOAN_LIMITS"    TYPE="Lookup"           REUSABLE="NO"/>
        <INSTANCE NAME="EXP_DERIVE_METRICS"        TRANSFORMATION_NAME="EXP_DERIVE_METRICS"        TYPE="Expression"       REUSABLE="NO"/>
        <INSTANCE NAME="FIL_VALID_APPLICATIONS"    TRANSFORMATION_NAME="FIL_VALID_APPLICATIONS"    TYPE="Filter"           REUSABLE="NO"/>
        <INSTANCE NAME="TGT_FACT_LOAN_APPLICATIONS" TRANSFORMATION_NAME="TGT_FACT_LOAN_APPLICATIONS" TYPE="Target Definition" REUSABLE="NO"/>
      </MAPPING>
    </FOLDER>
  </REPOSITORY>
</POWERMART>
